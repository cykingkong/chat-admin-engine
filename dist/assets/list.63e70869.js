import{u as e,v as a,_ as l}from"./index.a302575e.js";/* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               */import{d as t,f as s,r as i,aH as d,D as o,E as r,aK as n,H as u,aJ as c,aO as p,aP as m,u as v,aG as f,aF as g,bk as y,c2 as _,bl as b,c3 as x,bU as k,bG as h,bq as j,c4 as I,c5 as w,bM as z,c6 as P,c7 as U,c8 as V,be as A,bu as C,bv as q,bz as D,b9 as S,ba as N}from"./arco.0e1801a1.js";import{u as O}from"./loading.4d3258a0.js";import{i as B}from"./sph.fffc74fa.js";import{m as G,u as H,d as T}from"./merchantApi.2fad71a7.js";import{Q as E}from"./qrcode.vue.esm.973da956.js";import{f as Q}from"./vue.6618b53d.js";import"./chart.b4fe0742.js";const F=e=>(S("data-v-cc243177"),e=e(),N(),e),J={class:"container"},K={class:"box_bcw",style:{width:"100%"}},L=["src"],M={class:"shopInfo"},R={class:"shopName"},W={class:"APPID"},X={class:"pagination"},Y=F((()=>u("div",null,null,-1))),Z={key:0,class:"mark"},$={class:"iconBox"},ee=F((()=>u("span",{style:{"font-size":"16px",color:"#1d2129","font-weight":"bold",display:"block"}}," 扫码成功",-1))),ae=l(t({__name:"list",setup(l){e();Q();const t=s(!1),S=s(!1);s(!1),s([]),s("");const N=s("");s("");const F=s(!1);s(),s(0),s(0);const ae=s("修改信息"),le=()=>{window.open("https://docs.qq.com/doc/DTkNNQ0tEWGVvdUta?&u=a03ed1a898694aefbc6591043d89b6ce")},te=s({id:void 0,secret:"",remark:"",appId:"",type:1});s({remark:"备注"});const{loading:se,setLoading:ie}=O(!0);a.exports.useI18n();const de=s([]),oe=s({});s(!1),s("");const re={current:1,pageIndex:1,pageSize:10},ne=i({...re}),ue=async e=>{ie(!0);try{const{data:a}=await G(e);de.value=a.grid||[],ne.current=e.pageIndex,ne.pageIndex=e.pageIndex,ne.total=a.total}catch(a){}finally{ie(!1)}},ce=e=>{re.pageIndex=e,re.current=e,ne.pageIndex=e,ne.current=e,ue({...oe.value,...re})},pe=e=>{re.pageSize=e,ne.pageSize=e,ue({...oe.value,...re})},me=()=>{ce(1)};ue({...oe.value,...re}),s(!1);const ve=async(e,a)=>{2===e?(ae.value="修改备注信息",te.value.id=a.id,te.value.remark=a.remark,te.value.type=2,t.value=!0):3===e&&(ae.value="绑定小店",t.value=!0,te.value={id:void 0,secret:"",remark:"",appId:"",type:1},te.value.type=3)},fe=s(),ge=async e=>{var a;await(null==(a=fe.value)?void 0:a.validate())?e(!1):(1===te.value.type||(2===te.value.type?(await T(te.value),y.success({content:"修改成功",duration:5e3}),me()):(await B(te.value),y.success({content:"绑定成功",duration:5e3}),me())),window.setTimeout((()=>{e()}),300))},ye=()=>{t.value=!1};return(e,a)=>{const l=d("Breadcrumb"),s=_,i=d("icon-plus"),O=b,B=x,G=k,T=h,Q=j,ie=I,oe=w,re=z,ue=P,_e=U,be=V,xe=d("icon-check-circle-fill"),ke=A,he=C,je=q,Ie=D;return o(),r("div",J,[n(l,{items:["小店管理","小店列表"]}),u("div",K,[n(B,{justify:"space-between"},{default:c((()=>[n(s,{flex:"auto"},{default:c((()=>[p(" 已绑定小店数: "+m(ne.total),1)])),_:1}),n(s,{flex:"80px"},{default:c((()=>[n(O,{type:"primary",onClick:a[0]||(a[0]=e=>ve(3))},{icon:c((()=>[n(i)])),default:c((()=>[p(" 添加视频号小店 ")])),_:1})])),_:1})])),_:1})]),n(be,{class:"general-card-upai",style:{width:"100%","padding-bottom":"32px"}},{default:c((()=>[n(ue,{"row-key":"id",pagination:!1,loading:v(se),data:de.value,hoverable:!0,stripe:!1,bordered:!1,onPageChange:ce},{columns:c((()=>[n(ie,{title:"小店信息",align:"center"},{cell:c((({record:e})=>[n(Q,null,{default:c((()=>[n(G,null,{default:c((()=>[e.headimgUrl?(o(),r("img",{key:0,alt:"avatar",src:e.headimgUrl},null,8,L)):f("",!0)])),_:2},1024),n(Q,null,{default:c((()=>[u("div",M,[u("div",R,[n(T,null,{default:c((()=>[p(" 名称:"),n(T,{type:"secondary"},{default:c((()=>[p(m(e.nickname),1)])),_:2},1024)])),_:2},1024)]),u("div",W,[n(T,null,{default:c((()=>[p(" APPID:"),n(T,{type:"secondary"},{default:c((()=>[p(m(e.appid),1)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:2},1024)])),_:1}),n(ie,{title:"创建时间",align:"center"},{cell:c((({record:e})=>[p(m(e.createdAt),1)])),_:1}),n(ie,{title:"账号类型",align:"center"},{cell:c((({record:e})=>[n(oe,{color:"arcoblue"},{default:c((()=>[p(m(e.subjectType||"-"),1)])),_:2},1024)])),_:1}),n(ie,{title:"备注",align:"center"},{cell:c((({record:e})=>[p(m(e.remark||"-"),1)])),_:1}),n(ie,{align:"center",title:"操作","data-index":"operations",fixed:"right"},{cell:c((({record:e})=>[n(O,{type:"text",size:"small",onClick:a=>ve(2,e)},{default:c((()=>[p(" 修改 ")])),_:2},1032,["onClick"]),n(re,{content:"被解除绑定的店铺订单数据将被删除，请确认是否解绑？","ok-text":"确认",onOk:a=>(async e=>{const{code:a}=await H({mid:e.mid});200===a&&y.success({content:"解绑成功",duration:5e3}),me()})(e)},{default:c((()=>[n(O,{type:"text",status:"danger",size:"small"},{default:c((()=>[p(" 解绑小店 ")])),_:1})])),_:2},1032,["onOk"])])),_:1})])),_:1},8,["loading","data"]),u("div",X,[Y,u("div",null,[n(_e,{current:ne.pageIndex,"onUpdate:current":a[1]||(a[1]=e=>ne.pageIndex=e),"page-size":ne.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>ne.pageSize=e),total:Number(ne.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:ce,onPageSizeChange:pe},null,8,["current","page-size","total"])])])])),_:1}),n(ke,{visible:S.value,"onUpdate:visible":a[3]||(a[3]=e=>S.value=e),width:"auto",footer:!1,simple:!0,"hide-cancel":""},{title:c((()=>[p(" 添加视频号")])),default:c((()=>[n(be,{class:"general-card"},{default:c((()=>[n(Q,{size:16,direction:"vertical",fill:""},{default:c((()=>[n(Q,{direction:"vertical",fill:"",style:{"text-align":"center",position:"relative"}},{default:c((()=>[n(E,{value:N.value,size:200,level:"H",style:{position:"relative"}},null,8,["value"]),F.value?(o(),r("div",Z,[u("div",$,[n(xe,{style:{color:"rgb(0, 180, 42)"}}),ee])])):f("",!0),n(oe,{color:"green"},{default:c((()=>[p("请用微信APP扫描二维码")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),n(ke,{visible:t.value,"onUpdate:visible":a[7]||(a[7]=e=>t.value=e),title:ae.value,onCancel:ye,onBeforeOk:ge},{default:c((()=>[n(Ie,{ref_key:"formRef",ref:fe,model:te.value},{default:c((()=>[2===te.value.type?(o(),g(je,{key:0,field:"remark",label:"备注",rules:[{required:!0,message:"请填写备注"}]},{default:c((()=>[n(he,{modelValue:te.value.remark,"onUpdate:modelValue":a[4]||(a[4]=e=>te.value.remark=e),placeholder:"请填写备注"},null,8,["modelValue"])])),_:1})):f("",!0),3===te.value.type?(o(),g(je,{key:1,field:"appId",label:"APPID",rules:[{required:!0,message:"请填写APPID"}]},{default:c((()=>[n(he,{modelValue:te.value.appId,"onUpdate:modelValue":a[5]||(a[5]=e=>te.value.appId=e),placeholder:"请填写APPID"},null,8,["modelValue"])])),_:1})):f("",!0),3===te.value.type?(o(),g(je,{key:2,field:"secret",label:"密钥",rules:[{required:!0,message:"请填写密钥"}]},{default:c((()=>[n(he,{modelValue:te.value.secret,"onUpdate:modelValue":a[6]||(a[6]=e=>te.value.secret=e),placeholder:"请填写密钥"},null,8,["modelValue"])])),_:1})):f("",!0),3===te.value.type?(o(),g(je,{key:3,label:""},{label:c((()=>[n(T,{type:"primary",style:{cursor:"pointer"},onClick:le},{default:c((()=>[p(" 如何绑定小店")])),_:1})])),_:1})):f("",!0)])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-cc243177"]]);export{ae as default};
