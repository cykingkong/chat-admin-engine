import{v as e,_ as a,u as l,i as t}from"./index.a302575e.js";/* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css                */import{g as o,L as n,C as i,s as u}from"./customColumns.632d2feb.js";/* empty css                *//* empty css               *//* empty css               */import{d as s,f as d,aH as r,D as c,aF as p,aJ as m,aK as v,aO as f,H as y,u as g,b_ as h,c2 as _,ch as b,ci as k,c3 as w,bK as I,b9 as x,ba as C,v as T,r as V,o as S,w as N,E as D,aM as q,aL as Y,aG as O,aP as P,F as j,h as A,bD as K,bk as z,be as M,n as B,bA as G,bH as U,bq as H,by as R,bR as E,bU as $,bQ as J,cj as F,ck as L,bL as W,c8 as Q,bu as X,bv as Z,c9 as ee,bi as ae,cl as le,ce as te,bl as oe,bG as ne,bz as ie,cm as ue,cn as se,bM as de,c5 as re,co as ce,bj as pe,cf as me,bP as ve,c4 as fe,c6 as ye,c7 as ge,cp as he,bN as _e,bn as be,a$ as ke,b0 as we,cg as Ie,bJ as xe,cd as Ce}from"./arco.0e1801a1.js";import{u as Te}from"./loading.4d3258a0.js";import{p as Ve,a as Se}from"./settings.c4a72107.js";import{r as Ne,a as De,c as qe,b as Ye,i as Oe,d as Pe,e as je,p as Ae,h as Ke,f as ze,j as Me,k as Be,m as Ge,n as Ue,o as He,q as Re,s as Ee,u as $e,w as Je}from"./plant.a1deaa45.js";import{e as Fe,w as Le,a as We,x as Qe,r as Xe,c as Ze,y as ea}from"./enum.5f967a9b.js";import{s as aa,a as la,b as ta}from"./rule.9a62b1db.js";import{c as oa}from"./event.471a062e.js";import{E as na,e as ia}from"./export-list.0e079d35.js";import{f as ua}from"./vue.6618b53d.js";import{Q as sa}from"./qrcode.vue.esm.973da956.js";import{_ as da}from"./lodash.64978348.js";import{s as ra,j as ca,b as pa,d as ma}from"./sph.fffc74fa.js";import{p as va,c as fa}from"./address.2140e733.js";import{u as ya}from"./themes.dd6e2da4.js";import{u as ga}from"./chart-option.ec953526.js";import"./chart.b4fe0742.js";const ha={fixColums:["row-select","plantNameId","op","plantVideo","sphInfo.sphName"],defaultColumns:["estimatedWecoinAmount","process","cost","productOrderCount","productPlaceorderGmv","lr","roi","yl_roi","yjl","airCost","productClickCountPv","exposureCount","targetType","wecoinBid","duration","click_rate","qan_cost","click_cost","zh_cost","cancelPlant","groupInfo.groupName","packageInfo.packageName","noCostTime","indemnifyVoucherStatus","indemnifyVoucherAmount","indemnifyVoucherIntoAmount","indemnifyVoucherAmountRoi","indemnifyTs","voucherQuota","updatedAt","createdCancelTime","startEndTime","startCostTime","hotNoCostTime","newMemberDepName"]},_a=[{label:"表格行配置",value:"col",children:[{label:"投放数据",value:"placementData",columns:["estimatedWecoinAmount","process","cost","airCost","targetType","wecoinBid","duration","voucherQuota","cancelPlant","groupInfo.groupName","packageInfo.packageName","updatedAt","yjl","createdCancelTime","noCostTime","startEndTime","startCostTime","newMemberDepName"],check:[]},{label:"加热效果数据",value:"hd",columns:["productOrderCount","productPlaceorderGmv","lr","roi","yl_roi","productClickCountPv","exposureCount","click_rate","qan_cost","click_cost","zh_cost","indemnifyVoucherStatus","indemnifyVoucherAmount","indemnifyVoucherAmountRoi","indemnifyTs","hotNoCostTime"],check:[]}]}],ba=[{colKey:"row-select",type:"multiple",width:46,fixed:"left",title:"行选择框"},{colKey:"plantNameId",title:"计划名称/Id",width:"200",fixed:"left",align:"left"},{colKey:"op",title:"状态/操作",width:"220",fixed:"left",align:"center"},{colKey:"plantVideo",title:"被投视频",width:"450",align:"left"},{colKey:"sphInfo.sphName",title:"投放号",width:"150",align:"center"},{colKey:"estimatedWecoinAmount",title:"投放金额",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"process",title:"消耗比例",width:"170",align:"center"},{colKey:"cost",title:"消耗金额",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"productOrderCount",title:"订单数",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"productPlaceorderGmv",title:"营业额",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"lr",title:"利润",width:"100",align:"center"},{colKey:"roi",title:"ROI",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"yl_roi",title:"佣金ROI",width:"125",align:"center",sortType:"all",sorter:!0},{colKey:"yjl",title:"佣金率",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"airCost",title:"空耗值",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"productClickCountPv",title:"商品点击",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"exposureCount",title:"浏览",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"targetType",title:"投放目标",width:"100",align:"center"},{colKey:"wecoinBid",title:"出价",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"duration",title:"投放时长",width:"100",align:"center"},{colKey:"click_rate",title:"点击率",width:"100",align:"center"},{colKey:"qan_cost",title:"千展成本",width:"100",align:"center"},{colKey:"click_cost",title:"点击成本",width:"100",align:"center"},{colKey:"zh_cost",title:"转化成本",width:"100",align:"center"},{colKey:"cancelPlant",title:"自动关停",width:"100",align:"center"},{colKey:"groupInfo.groupName",title:"所属分组",width:"140",align:"center"},{colKey:"packageInfo.packageName",title:"所属计划包",width:"180",align:"center"},{colKey:"noCostTime",title:"无消耗时长",width:"200",align:"center",sorter:!0,sortType:"all"},{colKey:"indemnifyVoucherStatus",title:"补贴状态",width:"120",align:"center"},{colKey:"indemnifyVoucherAmount",title:"补贴金额",width:"120",align:"center"},{colKey:"indemnifyVoucherAmountRoi",title:"补贴ROI",width:"120",align:"center"},{colKey:"indemnifyTs",title:"补贴时间",width:"200",align:"center"},{colKey:"voucherQuota",title:"优惠券抵扣",width:"120",align:"center"},{colKey:"updatedAt",title:"更新时间",width:"200",align:"center"},{colKey:"createdCancelTime",title:"创建/关闭时间",width:"240"},{colKey:"startEndTime",title:"加热开始/结束时间",width:"240"},{colKey:"startCostTime",title:"开始消耗时间",width:"240",align:"center"},{colKey:"hotNoCostTime",title:"加热未消耗时长",width:"140",align:"center"},{colKey:"newMemberDepName",title:"所属部门",width:"140",align:"center"}],ka=[{colKey:"row-select",type:"multiple",width:46,fixed:"left",title:"行选择框"},{colKey:"plantNameId",title:"计划名称/Id",width:"200",fixed:"left",align:"left"},{colKey:"op",title:"状态/操作",width:"220",fixed:"left",align:"center"},{colKey:"plantVideo",title:"被投视频",width:"450",align:"left"},{colKey:"sphInfo.sphName",title:"投放号",width:"150",align:"center"},{colKey:"estimatedWecoinAmount",title:"投放金额",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"process",title:"消耗比例",width:"170",align:"center"},{colKey:"cost",title:"消耗金额",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"productOrderCount",title:"订单数",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"productPlaceorderGmv",title:"营业额",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"lr",title:"利润",width:"100",align:"center"},{colKey:"roi",title:"ROI",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"yl_roi",title:"佣金ROI",width:"125",align:"center",sortType:"all",sorter:!0},{colKey:"yjl",title:"佣金率",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"airCost",title:"空耗值",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"productClickCountPv",title:"商品点击",width:"120",align:"center",sortType:"all",sorter:!0},{colKey:"exposureCount",title:"浏览",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"targetType",title:"投放目标",width:"100",align:"center"},{colKey:"wecoinBid",title:"出价",width:"100",align:"center",sortType:"all",sorter:!0},{colKey:"duration",title:"投放时长",width:"100",align:"center"},{colKey:"click_rate",title:"点击率",width:"100",align:"center"},{colKey:"qan_cost",title:"千展成本",width:"100",align:"center"},{colKey:"click_cost",title:"点击成本",width:"100",align:"center"},{colKey:"zh_cost",title:"转化成本",width:"100",align:"center"},{colKey:"cancelPlant",title:"自动关停",width:"100",align:"center"},{colKey:"groupInfo.groupName",title:"所属分组",width:"140",align:"center"},{colKey:"packageInfo.packageName",title:"所属计划包",width:"180",align:"center"},{colKey:"noCostTime",title:"无消耗时长",width:"200",align:"center",sorter:!0,sortType:"all"},{colKey:"indemnifyVoucherStatus",title:"补贴状态",width:"120",align:"center"},{colKey:"indemnifyVoucherAmount",title:"补贴金额",width:"120",align:"center"},{colKey:"indemnifyVoucherAmountRoi",title:"补贴ROI",width:"120",align:"center"},{colKey:"indemnifyTs",title:"补贴时间",width:"200",align:"center"},{colKey:"voucherQuota",title:"优惠券抵扣",width:"120",align:"center"},{colKey:"updatedAt",title:"更新时间",width:"200",align:"center"},{colKey:"createdCancelTime",title:"创建/关闭时间",width:"240"},{colKey:"startEndTime",title:"加热开始/结束时间",width:"240"},{colKey:"startCostTime",title:"开始消耗时间",width:"240",align:"center"},{colKey:"hotNoCostTime",title:"加热未消耗时长",width:"140",align:"center"},{colKey:"newMemberDepName",title:"所属部门",width:"140",align:"center"}],wa=(e=>(x("data-v-c59fdd06"),e=e(),C(),e))((()=>y("div",{class:"titleBox"},[y("div",{class:"textBox"},[y("div",{class:"leftBorder"}),y("div",{class:"titleText",style:{color:"#000"}}," 数据概览 ")])],-1))),Ia={style:{padding:"0 15px 0 0"}},xa=a(s({__name:"data-overview",setup(a,{expose:l}){const t=d({}),o=d(!1),n=d(1),i=(e,a,l,t,o)=>({name:e,data:o,type:"line",smooth:!0,yAxisIndex:t,itemStyle:{color:a},emphasis:{focus:"series",itemStyle:{color:a,borderWidth:2,borderColor:l}},lineStyle:{width:2,color:a},showSymbol:!1,areaStyle:{opacity:.1,color:a}});e.exports.useI18n();const{loading:u,setLoading:s}=Te(!0);ya();const x=d([]),C=d(),T=d(),V=d([]),S=d([]),N=d([]),D=d([]),{chartOption:q}=ga((e=>({grid:{left:"5.6%",right:"4",top:"40",bottom:"40"},legend:{data:["消耗","订单数","GMV","ROI"],selected:{}},xAxis:{type:"category",offset:2,data:x.value,boundaryGap:!1,axisLabel:{color:"#4E5969",formatter:(e,a)=>0===a||a===x.value.length-1?"":`${e}`},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisPointer:{show:!0,lineStyle:{color:"#23ADFF",width:2}}},yAxis:[{show:!1,type:"value",axisLine:{show:!1},axisLabel:{formatter:(e,a)=>0===a?String(e):e>1e4?e/1e4+"w":e},splitLine:{lineStyle:{color:e?"#2E2E30":"#F2F3F5"}}},{show:!1,type:"value",axisLine:{show:!1},axisLabel:{formatter:(e,a)=>0===a?String(e):e>1e4?e/1e4+"w":e},splitLine:{lineStyle:{color:e?"#2E2E30":"#F2F3F5"}}},{show:!1,type:"value",axisLine:{show:!1},axisLabel:{formatter:(e,a)=>0===a?String(e):e>1e4?e/1e4+"w":e},splitLine:{lineStyle:{color:e?"#2E2E30":"#F2F3F5"}}},{show:!1,type:"value",axisLine:{show:!1},axisLabel:{formatter:(e,a)=>0===a?String(e):e>1e4?e/1e4+"w":e},splitLine:{lineStyle:{color:e?"#2E2E30":"#F2F3F5"}}}],tooltip:{trigger:"axis",formatter(e){const[a]=e;return`<div>\n            <p class="tooltip-title">${a.axisValueLabel}</p>\n            ${l=e,l.map((e=>`<div class="content-panel">\n        <p>\n          <span style="background-color: ${e.color}" class="tooltip-item-icon"></span><span>${e.seriesName}</span>\n        </p>\n        <span class="tooltip-value">${e.value.toLocaleString()}</span>\n      </div>`)).reverse().join("")}\n          </div>`;var l},className:"echarts-tooltip-diy"},graphic:{elements:[{type:"text",left:"2.6%",bottom:"18",style:{text:C.value,textAlign:"center",fill:"#4E5969",fontSize:12}},{type:"text",right:"0",bottom:"18",style:{text:T.value,textAlign:"center",fill:"#4E5969",fontSize:12}}]},series:[i("ROI","#3469FF","#E8F3FF",3,D.value),i("GMV","#33D1C9","#E8FFFB",2,N.value),i("订单数","#F77234","#FFE4BA",0,S.value),i("消耗","#722ED1","#F5E8FF",1,V.value)]})));d([]),s(!0);const Y=async()=>{s(!0);try{if(V.value=[],S.value=[],N.value=[],D.value=[],x.value=[],1===n.value){x.value.push("0:00"),V.value.push(0),S.value.push(0),N.value.push(0),D.value.push(0);const{data:e}=await Ne({...t.value,reportDate:t.value.startDate});e.grid&&e.grid.forEach(((a,l)=>{0===l?(V.value.push(a.cost||0),S.value.push(a.productOrderCount||0),N.value.push(a.productPlaceorderGmv||0),a.productPlaceorderGmv>0&&a.cost>0?D.value.push(a.productPlaceorderGmv/a.cost):D.value.push(0)):(V.value.push(a.cost-e.grid[l-1].cost||0),S.value.push(a.productOrderCount-e.grid[l-1].productOrderCount||0),N.value.push(a.productPlaceorderGmv-e.grid[l-1].productPlaceorderGmv||0),a.productPlaceorderGmv-e.grid[l-1].productPlaceorderGmv>0&&a.cost-e.grid[l-1].cost>0?D.value.push((a.productPlaceorderGmv-e.grid[l-1].productPlaceorderGmv)/(a.cost-e.grid[l-1].cost)):D.value.push(0)),x.value.push(`${a.reportHourStr}`)}))}else{const{data:e}=await De({...t.value});e.grid&&e.grid.forEach((e=>{V.value.push(e.cost||0),S.value.push(e.productOrderCount||0),N.value.push(e.productPlaceorderGmv||0),e.productPlaceorderGmv>0&&e.cost>0?D.value.push(e.productPlaceorderGmv/e.cost):D.value.push(0),x.value.push(h(e.reportDate).format("M.D"))}))}}catch(e){}finally{s(!1)}};return l({setChartsData:e=>{h(e.startDate).format("YYYYMMDD")===h(e.endDate).format("YYYYMMDD")?(n.value=1,o.value=!1):(n.value=2,o.value=!0),t.value=e,Y()},setParamsData:e=>{e.startDate,e.endDate}}),(e,a)=>{const l=_,t=b,i=k,s=w,d=r("Chart"),h=I;return c(),p(h,{loading:g(u),style:{width:"100%"}},{default:m((()=>[v(s,{class:"banner",justify:"space-between"},{default:m((()=>[v(l,{flex:"250px",class:"accountCheck"},{default:m((()=>[wa])),_:1}),v(l,{flex:"170px"},{default:m((()=>[v(i,{"model-value":n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),type:"button",onChange:a[1]||(a[1]=e=>Y())},{default:m((()=>[v(t,{value:1,disabled:o.value},{default:m((()=>[f("时段统计")])),_:1},8,["disabled"]),v(t,{value:2},{default:m((()=>[f("按天统计")])),_:1})])),_:1},8,["model-value"])])),_:1})])),_:1}),y("div",Ia,[v(d,{style:{height:"328px","margin-top":"10px"},option:g(q)},null,8,["option"])])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-c59fdd06"]]),Ca=e=>(x("data-v-308f1aeb"),e=e(),C(),e),Ta={ref:"container",class:"container"},Va={class:""},Sa={class:"goodStatusBox"},Na=["onClick"],Da={key:0},qa={src:"https://img.adyinqing.com/upai_shop/is7fabir1697525250082",alt:"",class:"sortTopBg"},Ya={key:0},Oa={class:"nameBox"},Pa={class:"proCode",style:{display:"flex","align-items":"center"}},ja={class:"proCode",style:{display:"flex","align-items":"center"}},Aa=Ca((()=>y("div",{class:"labelText"},"投手号搜索：",-1))),Ka=Ca((()=>y("div",{class:"labelText"},"被投号搜索：",-1))),za=Ca((()=>y("div",{class:"labelText"},"计划包：",-1))),Ma=Ca((()=>y("p",null,"更新时间：指的是计划最后一次进行修改或更新的时间(即数据产生了变动，比如：消耗、订单…等等)",-1))),Ba=Ca((()=>y("p",null,"创建时间：指的是计划创建的时间，不会因为后续的修改而改变",-1))),Ga={class:"numBox2"},Ua={class:"titleBox"},Ha=["src"],Ra={class:"n"},Ea={key:0,class:"rmb"},$a={class:"name"},Ja={key:0,class:"official iconfont"},Fa=Ca((()=>y("span",{class:"icon-shipinhao"},null,-1))),La={class:"proCode",style:{display:"flex","align-items":"center"}},Wa={class:"proCode",style:{display:"flex","align-items":"center"}},Qa={class:"proCode",style:{display:"flex","align-items":"center"}},Xa=Ca((()=>y("br",null,null,-1))),Za=Ca((()=>y("br",null,null,-1))),el={key:0},al={class:"proCode",style:{display:"flex","align-items":"center"}},ll={class:"upai_content"},tl=Ca((()=>y("div",{class:"title"}," 加热数据 ",-1))),ol={class:"numBox"},nl={class:"titleBox"},il=["src"],ul={class:"n"},sl={key:0,class:"rmb"},dl={class:"upai_content"},rl=Ca((()=>y("div",{class:"title"}," 加热信息 ",-1))),cl={class:"upai_content"},pl=Ca((()=>y("div",{class:"title"}," 支付信息 ",-1))),ml={class:"upai_content"},vl=Ca((()=>y("div",{class:"title"}," 补贴信息 ",-1))),fl={class:"pagination"},yl=a(s({__name:"data",setup(e,{expose:a}){const s=d(),x=d(),C=d(),Ne=d(),De=d(),ya=d(-1),ga=l(),wa=d([]),Ia=d([]),Ca=d(!1),yl=d("(平均消耗:-/分钟)"),gl=T(JSON.parse(JSON.stringify(ha))),hl=T(JSON.parse(JSON.stringify(_a))),_l=d([]),bl=T(JSON.parse(JSON.stringify(ba))),kl=T(ka),wl=T(ka),Il=async e=>{const a={pageSize:200,pageIndex:1,name:e},{data:l}=await qe({...a});l.grid&&(wa.value=l.grid.map((e=>({packageId:`${e.packageId}`,packageName:e.packageName}))))};Il();const xl=async e=>{Il(e)},Cl=[{element:".goodStatusBox",title:"多维度分析",body:"根据不同维度对计划进行归类，使商家可以更加精准的分析投产结果",placement:"bottom-right",highlightPadding:4},{element:".dateType",title:"时间筛选",body:()=>A(K('<div>可根据“更新时间”或“创建时间”为维度筛选对应时间的计划</div>\n              <div style="margin-top:16px">更新时间：指的是计划最后一次进行修改或更新的时间</div>\n              <div>创建时间：指的是计划创建的时间，不会因为后续的修改而改变</div>')),placement:"bottom-right",highlightPadding:4},{element:".setTable",title:"多维度分析",body:"支持自定义配置数据维度，商家可根据自己的运营策略进行数据查看",placement:"top-right",highlightPadding:4}];0===ga.$state.plantDataGuidance&&setTimeout((()=>{ya.value=0}),800);const Tl=async()=>{ya.value=-1,await t({plantDataGuidance:1}),await ga.info()},Vl=async()=>{await t({plantDataGuidance:1}),await ga.info()},Sl=d({name:null,type:1,firstType:1,firstVal:0,secondType:1,secondVal:0,flagType:1}),Nl=d(),Dl=d(),ql=V({groupId:0,name:""}),Yl=["","#7bc616","#165dff","#00b42a","#00b42a","#eb0aa4","#f53f3f","#f53f3f","#f53f3f","#f53f3f"];d(!1);const Ol=d(!1),Pl=d({plantId:null,groupId:null,groupType:1,addName:null}),jl=d(),Al=d([]);(async()=>{const{data:e}=await Ye({pageIndex:1,pageSize:200});Al.value=e.grid||[]})();const Kl=d(!1),zl=d({plantId:null,packageId:null,packageType:1,addName:null}),Ml=d(),Bl=d([]);(async()=>{const{data:e}=await qe({pageIndex:1,pageSize:200});Bl.value=e.grid||[]})();const Gl=[{label:"当日",value:()=>[h().startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"昨日",value:()=>[h().add(-1,"day").startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一周",value:()=>[h().add(-1,"week").startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一月",value:()=>[h().add(-1,"month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"本月",value:()=>[h().startOf("month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().endOf("date").format("YYYY-MM-DD HH:mm:ss")]}],Ul={x:"150%"},Hl=d(!0),Rl=()=>{Hl.value=!Hl.value};S((()=>{El()}));const El=()=>{o({type:1}).then((({data:e})=>{if(""!==e.customColumnValue){const a=JSON.parse(e.customColumnValue);_l.value=JSON.parse(JSON.stringify([...gl.value.fixColums,...a])),gl.value.defaultColumns=a}else _l.value=gl.value.fixColums.concat(gl.value.defaultColumns)}))};(async()=>{try{const{data:e}=await Ve();if(e.grid){const a=oa(e.grid)||[];a.unshift({memberDepId:-1,memberDepName:"全部"}),Ia.value=a}else{const e=[];e.unshift({memberDepId:-1,memberDepName:"全部"}),Ia.value=e}}catch(e){}})(),d("258px");const $l=d(!1),Jl=d(!1),Fl=d(!1),Ll=d(""),Wl=d('[{"搞笑":"1083"},{"亲子":"1084"},{"二次元":"1085"},{"明星名人":"1086"},{"旅行风景":"1087"},{"舞蹈":"1088"},{"音乐":"1089"},{"运动":"1090"},{"影视综艺":"1091"},{"时尚":"1092"},{"美食":"1093"},{"萌宠":"1094"},{"动物":"1095"},{"游戏":"1096"},{"科技":"1097"},{"工业/机械/施工":"1098"},{"车":"1099"},{"生活":"1100"},{"新闻资讯":"1101"},{"知识":"1102"},{"悬疑/侦探剧场":"1103"},{"情感":"1104"},{"才艺":"1105"},{"生活技巧":"1106"}]');Wl.value=JSON.parse(Wl.value);const Ql=new Map;Wl.value.forEach(((e,a)=>{Ql.set(e[Object.keys(e)],Object.keys(e)[0])}));const{loading:Xl,setLoading:Zl}=Te(!0),et={current:1,pageIndex:1,pageSize:30,defaultPageSize:30,pageSizeOptions:[10,30,50,100],total:0,defaultCurrent:1,page:1},at=V({...et}),lt=d([]),tt=d(!1),ot=V({pageIndex:1,pageSize:50,total:0}),nt=()=>({startDate:h().startOf("date").format("YYYY-MM-DD HH:mm:ss"),endDate:h().endOf("date").format("YYYY-MM-DD HH:mm:ss"),pageIndex:1,pageSize:10,dateType:2,taskStatus:-1,memberDepId:-1});d([]);const it=async e=>{Ll.value="计划删除后无法复原，请确认是否删除",mt.value.cost&&(Ll.value="删除计划中有包含部分数据，删除可能导致投放数据异常，请谨慎操作确认是否删除"),Fl.value=e},ut=async e=>{0!==vt.value.length?(Ll.value="计划删除后无法复原，请确认是否删除",vt.value.forEach((e=>{"-"!==da.find(pt.value,["plantId",e]).cost&&(Ll.value="删除计划中有包含部分数据，删除可能导致投放数据异常，请谨慎操作确认是否删除")})),$l.value=e):z.info("请先选择需要删除的计划")};d([]);const st=d(!1),dt=d("新建计划包"),rt=d(["","元","元","元","小时","","","小时"]),ct=d(nt()),pt=d([]);d(0);const mt=d(),vt=d([]),ft=d([]),yt=ua(),gt=d([h().startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().endOf("date").format("YYYY-MM-DD HH:mm:ss")]),{taskId:ht}=yt.currentRoute.value.query||0,{packageId:_t,packageCreaedAt:bt}=yt.currentRoute.value.query||0,{videoId:kt}=yt.currentRoute.value.query||0;Number(ht)>0&&(ct.value.taskId=ht),Number(_t)>0&&(ct.value.packageId=_t),Number(kt)>0&&(ct.value.videoId=kt),Number(bt)>0&&(ct.value.startDate=h.unix(Number(bt)).format("YYYY-MM-DD HH:mm:ss"),gt.value[0]=h.unix(Number(bt)).format("YYYY-MM-DD HH:mm:ss"));const wt=d(0);d(!1);const It=d(!1);d(!1),d(!1),d(!1);const xt=d("");d(""),d(""),d(null);const Ct=d(0),Tt=d([{id:1,name:"计划列表"},{id:2,name:"分组计划"},{id:3,name:"商品计划"},{id:4,name:"视频计划"},{id:5,name:"投放号计划"},{id:6,name:"被投号计划"},{id:7,name:"关停策略"}]),Vt={1:"18-24岁",2:"25-29岁",3:"30-39岁",4:"40-49岁",5:"50岁以上"},St=d(!1),Nt=d(!1),Dt=d(!1),qt=d(!1),Yt=d([]),Ot=d(1),Pt=V({orderKey:"createdAt",orderSort:"DESC"}),jt=d(0),At=d(),Kt=d(""),zt=async()=>{if(qt.value)return;let e=[],a={},l="";const t=20;switch(qt.value=!0,Tt.value[wt.value].id){case 4:a=await je({name:Kt.value,pageIndex:Ot.value,orderKey:Pt.orderKey,orderSort:Pt.orderSort,pageSize:t}),e=a.data.grid,l="videoId";break;case 2:a=await Ye({name:Kt.value,pageIndex:Ot.value,pageSize:t}),e=a.data.grid,l="groupId";break;case 3:a=await Pe({name:Kt.value,pageIndex:Ot.value,pageSize:t}),e=a.data.grid,l="goodsId";break;case 5:a=await ra({sphName:Kt.value,pageIndex:Ot.value,pageSize:t,sphType:1}),e=a.data.grid,l="sphId";break;case 6:a=await Oe({name:Kt.value,pageIndex:Ot.value,pageSize:t}),e=a.data.grid,l="investedId";break;case 7:a=await aa({name:Kt.value,pageIndex:Ot.value,pageSize:t}),e=a.data.grid,l="srId";break;default:return Yt.value=[],qt.value=!1,Dt.value=!0,void(Ot.value=0)}null!=e?e.forEach(((e,a)=>{Yt.value.push(e),0===a&&1===Ot.value&&(6===Tt.value[wt.value].id?ct.value[l]=e.id:ct.value[l]=e[l])})):ct.value[l]=-1,qt.value=!1,Dt.value=!0,Ot.value+=1},Mt=d([{t:"投放金额",key:"estimatedWecoinAmount",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"消耗金额",key:"cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"成交金额",key:"productPlaceorderGmv",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"成交订单数",key:"productOrderCount",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"成交ROI",key:"roi",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"佣金ROI",key:"yj_roi",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"空耗值",key:"airCost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2,tips:"截止上一次转化成功(即出单)到目前为止的消耗金额",tips2:"例如：计划加热中，消耗金额为500¥、出单为0，则空耗值为500"},{t:"利润",key:"lr",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"千次展示成本",key:"qz_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"点击成本",key:"click_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"转化成本",key:"zh_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"商品点击率",key:"click_rate",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"点击成交率",key:"cj_rate",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"点击数",key:"productClickCountPv",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"浏览数",key:"exposureCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"关注数",key:"followCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"点赞数",key:"likeCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"补贴金额",key:"indemnifyVoucherAmount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:2,tips:"即将到账补贴金额"},{t:"补贴ROI",key:"indemnifyRoi",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:3,tips:"补贴ROI=GMV/(投流消耗 - 即将到账补贴金额)"}]),Bt=d([{t:"订单金额",key:"productPlaceorderGmv",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"订单数",key:"productOrderCount",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:1},{t:"消耗金额",key:"cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"平均客单价",key:"pjKdj",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"无消耗时长",key:"noCostTime",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:0},{t:"成交ROI",key:"roi",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"佣金ROI",key:"yj_roi",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"点击率",key:"click_rate",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"成交率",key:"cj_rate",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:3},{t:"空耗值",key:"airCost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"千次展示成本",key:"qz_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"关注成本",key:"gz_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"点击成本",key:"click_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"转化成本",key:"zh_cost",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"利润",key:"lr",url:"https://img.adyinqing.com/upai_shop/sqolvvco1676629138552",n:0,type:2},{t:"点击数",key:"productClickCountPv",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"浏览数",key:"exposureCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"点赞数",key:"likeCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"关注数",key:"followCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1},{t:"补贴金额",key:"indemnifyVoucherAmount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:2},{t:"评论数",key:"favCount",url:"https://img.adyinqing.com/upai_shop/9vefp7lc1676629138525",n:0,type:1}]),Gt=d([{label:"加热方式:",value:"",key:"promotionType",expandable:!1},{label:"性别:",value:"",key:"gender",expandable:!1},{label:"优先提升:",value:"",key:"promotionTarget",expandable:!1},{label:"年龄:",value:"",key:"ageRange",expandable:!1},{label:"成交出价:",value:"",key:"wecoinBid",expandable:!1},{label:"区域:",value:"",key:"cityIds",expandable:!1},{label:"加热时长:",value:"",key:"duration",expandable:!1},{label:"兴趣:",value:"",key:"interestTag",expandable:!1},{label:"设备:",value:"",key:"deviceTypes",expandable:!1},{label:"粉丝层:",value:"",key:"videoTagArr",expandable:!1}]),Ut=d([{label:"补贴状态:",value:"",key:"indemnifyVoucherStatus",expandable:!1},{label:"补贴金额:",value:"",key:"indemnifyVoucherAmount",expandable:!1},{label:"补贴时间:",value:void 0,key:"indemnifyTs",expandable:!1}]),Ht=d([{label:"已支付微信豆:",value:"",key:"estimatedWecoinAmount",tips:"预计支付微信豆",expandable:!1},{label:"使用优惠:",value:"未使用",key:"quota",tips:"是否使用优惠券抵扣",expandable:!1},{label:"实付微信豆:",value:"",key:"estimatedWecoinAmountTruePay",tips:"计划实际支付微信豆",expandable:!1},{label:"已返还微信豆:",value:"",key:"estimatedWecoinAmountBack",tips:"计划完成消耗后官方退款返还的微信豆",expandable:!1},{label:"实际使用微信豆:",value:"",key:"costCoin",expandable:!1,tips:"计划实际消耗微信豆"}]),Rt=d([]),Et=d(!1),$t=d([]),Jt=d([]),Ft=d([]),Lt=d([]);(async()=>{const{data:e}=await ra({pageIndex:1,pageSize:200,sphType:1});$t.value=e.grid})(),(async()=>{const{data:e}=await Pe({pageIndex:1,pageSize:200});Ft.value=e.grid})(),(async()=>{const{data:e}=await je({pageIndex:1,pageSize:200});Lt.value=e.grid})(),(async()=>{const{data:e}=await Oe({pageIndex:1,pageSize:200});Jt.value=e.grid})();localStorage.getItem("plantColumns")&&(bl.value=JSON.parse(localStorage.getItem("plantColumns")));const Wt=d(!1),Qt=d([]),Xt=d({oldShutdownStatus:0,shutdownStatus:null,shutdownSetId:null,plantId:0}),Zt=async()=>{const{data:e}=await aa({pageIndex:1,pageSize:200});Qt.value=e.grid||[]};Zt();const eo=async e=>{var a;await(null==(a=Nl.value)?void 0:a.validate())?e(!1):(1===Sl.value.type?(await la({...Sl.value}),z.success({content:"添加关停策略成功",duration:5e3}),await Zt()):(await ta({...Sl.value}),z.success({content:"修改关停策略成功",duration:5e3}),await Zt()),Sl.value.name=null,window.setTimeout((()=>{e()}),300))},ao=()=>{Sl.value.name=Xe[Sl.value.firstType]+Sl.value.firstVal+Ze[Sl.value.flagType]+Xe[Sl.value.secondType]+Sl.value.secondVal},lo=async e=>{if(e)Xt.value.shutdownStatus=0!==e.shutdownStatus,Xt.value.shutdownSetId=[],e.shutdownSetId&&e.shutdownSetId.split(",").forEach((e=>{Xt.value.shutdownSetId.push(Number(e))})),Xt.value.plantId=e.plantId,Xt.value.oldShutdownStatus=e.shutdownStatus,vt.value=[e.plantId];else{if(0===vt.value.length)return void z.info("请先选择需自动关停配置的计划");Xt.value.shutdownStatus=!0,Xt.value.shutdownSetId=[]}Wt.value=!0},to=async e=>{null!=Xt.value.shutdownSetId&&Xt.value.shutdownSetId.length>0&&!1===Xt.value.shutdownStatus&&(Xt.value.shutdownStatus=!0),0===Xt.value.shutdownSetId.length&&!0===Xt.value.shutdownStatus&&(Xt.value.shutdownStatus=!1)},oo=async(e,a)=>{ft.value=a.selectedRowData.map((e=>e)),vt.value=e},no=e=>{e?(ct.value.startDate=e[0],ct.value.endDate=e[1]):(ct.value.startDate=h().add(-3,"month").format("YYYY-MM-DD").toString(),ct.value.endDate=h().format("YYYY-MM-DD").toString()),yo()},io=e=>isNaN(e)||0===Number(e)||e===1/0?0:Number(e).toFixed(2),uo=e=>isNaN(e)||0===Number(e)||e===1/0?"-":Number(e).toFixed(2),so=e=>isNaN(e)||0===Number(e)?"-":Number(100*e).toFixed(2),ro=async e=>{Zl(!0);try{(async e=>{var a;const{data:l}=await He(e),t=l;t.pjKdj=io(t.productPlaceorderGmv/t.productOrderCount),t.roi=io(t.productPlaceorderGmv/t.cost),t.yj_roi=io(t.productPlaceorderGmv*(t.yjl/t.plantCount/100)/t.cost),t.click_rate=`${io(t.productClickCountPv/t.exposureCount*100)}%`,t.cj_rate=`${io(t.productOrderCount/t.productClickCountPv*100)}%`,t.qz_cost=io(t.cost/t.exposureCount*1e3),t.gz_cost=io(t.cost/t.followCount),t.click_cost=io(t.cost/t.productClickCountPv),t.zh_cost=io(t.cost/t.productOrderCount),t.lr=io(t.productPlaceorderGmv*(t.yjl/t.plantCount/100)-t.cost),t.noCostTime=`${io(t.noCostTime/60)}分`,Mt.value.forEach((e=>{e.n=t[e.key]||"-","indemnifyVoucherAmount"===e.key&&(e.n=Number(t[e.key])/100||"-"),"indemnifyVoucherIntoAmount"===e.key&&(e.n=t.indemnifyVoucherIntoAmount?t.indemnifyVoucherIntoAmount/100:"-"),"indemnifyRoi"===e.key&&(e.n=t.cost-t.indemnifyVoucherAmount/100>0&&t.indemnifyVoucherAmount>0?uo(Number(t.productPlaceorderGmv)/(t.cost-t.indemnifyVoucherAmount/100)):0)})),null==(a=x.value)||a.setChartsData(ct.value)})(e);const{data:a}=await Ae(e);a.grid&&a.grid.forEach(((e,a)=>{if(e.key=String(a+1),e.sonDepInfo){const a=e.sonDepInfo.depParentId?da.find(po.value,["memberDepId",e.sonDepInfo.depParentId]).memberDepName:"";e.newMemberDepName=""+(e.sonDepInfo?`${e.sonDepInfo.depParentId?a:""}${e.sonDepInfo.depParentId?"/":""}${e.sonDepInfo.memberDepName}`:"")}if(e.voucherInfo&&(e.voucherQuota=e.voucherInfo.quota?uo(e.voucherInfo.quota/100):"-"),e.productPlaceorderGmv>0?e.lr=uo(e.productPlaceorderGmv*(e.yjl/100)-e.cost):e.lr=0,e.cost=uo(e.cost),e.startCostTime=e.startTime?h(e.startTime).add(e.noCostTime,"second").format("YYYY-MM-DD HH:mm:ss"):"-",e.hotNoCostTime=e.hotNoCostTime?To(e.hotNoCostTime):"-",e.productPlaceorderGmv=uo(e.productPlaceorderGmv),e.roi=uo(e.productPlaceorderGmv/e.cost),e.yl_roi=uo(e.productPlaceorderGmv*(e.yjl/100)/e.cost),e.airCost=uo(e.airCost),e.exposureCount=uo(e.exposureCount),e.targetType=ea[e.targetType],e.wecoinBid=e.wecoinBid>0?e.wecoinBid:"智能","商品ROI"===e.targetType)try{e.taskInfo&&e.taskInfo.reqJson?e.wecoinBid=Number(JSON.parse(e.taskInfo.reqJson).feedPromotionOrderInfo.suggest.roiBidX100)?Number(JSON.parse(e.taskInfo.reqJson).feedPromotionOrderInfo.suggest.roiBidX100)/100+"(roi)":"智能":e.wecoinBid="-"}catch(t){}e.duration=e.duration/3600+"小时",e.click_rate="-"===so(e.productClickCountPv/e.exposureCount)?"-":`${so(e.productClickCountPv/e.exposureCount)}%`,e.qan_cost=uo(e.cost/e.exposureCount*1e3),e.click_cost=uo(e.cost/e.productClickCountPv),e.zh_cost=uo(e.cost/e.productOrderCount),e.indemnifyVoucherAmountRoi=(e.cost-e.indemnifyVoucherAmount)/100>0&&e.indemnifyVoucherAmount>0?uo(e.productPlaceorderGmv/(e.cost-e.indemnifyVoucherAmount/100)):"-";const l=2===e.indemnifyVoucherStatus?"¥"+e.indemnifyVoucherAmount/100:"-";e.indemnifyVoucherIntoAmount=l,e.shutdownSwitch=0!==e.shutdownStatus})),pt.value=a.grid||[],at.current=e.pageIndex,at.pageIndex=e.pageIndex,at.total=a.total}catch(a){}finally{Zl(!1)}},co=d(),po=d([]),mo=()=>{var e;null==(e=Ne.value)||e.showModel()},vo=async()=>{const e={...ct.value};e.excel=!0;const{data:a,code:l,message:t}=await ia(e);200===l&&z.success("数据报表生成中，请前往报表列表查看")},fo=e=>{et.pageIndex=e.current,et.current=e.current,et.pageSize=e.pageSize,at.pageIndex=e.current,at.current=e.current,at.pageSize=e.pageSize,ro({...ct.value,...et})},yo=()=>{fo({current:at.pageIndex,pageSize:at.pageSize})},go=async()=>{const e=await Ke({});e.success?z.success("刷新成功"):z.success(e.message)},ho=async e=>{e?(ct.value.orderKey=e.sortBy,ct.value.orderSort=e.descending?"DESC":"ASC"):ct.value.orderSort=null,yo()},_o=async e=>{var a;if(await(null==(a=Dl.value)?void 0:a.validate()))return void e(!1);const{data:l,code:t}=await ze(ql);200===t&&z.success({content:"修改分组名称成功",duration:5e3}),Yt.value=[],Ot.value=1,zt(),window.setTimeout((()=>{e()}),300)},bo=async e=>{try{let e=0;!0===Xt.value.shutdownStatus&&(e=0===Xt.value.oldShutdownStatus?1:Xt.value.oldShutdownStatus);const{data:a}=await Me({plantId:vt.value.join(","),shutdownSetId:Xt.value.shutdownSetId.join(","),shutdownStatus:e});z.success({content:"更新关停策略成功",duration:5e3})}catch(a){}finally{Wt.value=!1,yo()}e(!1)},ko=async e=>{if(e){const{data:a,code:l}=await Be({plantId:`${e}`});200===l&&(z.success("删除计划成功。"),St.value=!1,yo())}else{const e=vt.value.join(","),{data:a,code:l}=await Be({plantId:e});200===l&&(z.success("批量删除计划成功。"),yo())}},wo=async()=>{clearInterval(At.value)},Io=async e=>{if(0===vt.value.length)return z.info("请先选择需要关闭的计划"),void e(!0);try{Do(ft.value).then((async e=>{const{data:a}=await ca({plantId:vt.value.join(",")});z.success({content:"请求关停成功",duration:5e3}),yo()})).catch((async e=>{var a;const l=da.filter(e.grid,["sphStatus",2]),t=da.filter(e.grid,["sphStatus",1]),o=l.map((e=>e.sphName)),n=[];for(let i=0;i<t.length;i+=1)ft.value.forEach((e=>{t[i].sphId===e.sphInfo.sphId&&n.push(e.plantId)}));if(n.length>0){const{data:e}=await ca({plantId:n.join(",")})}yo(),null==(a=De.value)||a.showModel(o,!0)}))}catch(a){return void e(!0)}e(!0)},xo=async()=>{tt.value=!0;const{data:e}=await Re({plantId:mt.value.plantId,pageIndex:ot.pageIndex,pageSize:ot.pageSize});lt.value=e.grid;let a="";if(e.grid){a=h(e.grid[0].createAt).unix().valueOf();const l=h(Vo.value).unix().valueOf(),t=Number(uo((a-l)/60));yl.value=t?`(平均消耗:${uo(So.value/t)}/分钟)`:"(平均消耗:-/分钟)"}else yl.value="(平均消耗:-/分钟)";ot.total=e.total,tt.value=!1},Co=e=>{ot.pageIndex=e,xo()};function To(e){let a=parseInt(e/60/60%24),l=parseInt(e/60%60),t=parseInt(e%60);return a=a<10?`0${a}`:a,l=l<10?`0${l}`:l,t=t<10?`0${t}`:t,`${a}:${l}:${t}`}const Vo=d(),So=d(),No=async e=>{St.value=!0,Nt.value=!0;const{data:a}=await Ge({plantId:e.plantId});mt.value=a.info;const l=mt.value;B((()=>{var a;null==(a=C.value)||a.fetchData({plantId:e.plantId,pageIndex:1,pageSize:200})})),Vo.value=h(l.startTime).add(l.noCostTime,"second").format("YYYY-MM-DD HH:mm:ss"),So.value=l.cost,l.pjKdj=io(l.productPlaceorderGmv/l.productOrderCount),l.roi=io(l.productPlaceorderGmv/l.cost),l.yj_roi=io(l.productPlaceorderGmv*(l.yjl/100)/l.cost),l.click_rate=`${io(l.productClickCountPv/l.exposureCount*100)}%`,l.cj_rate=`${io(l.productOrderCount/l.productClickCountPv*100)}%`,l.qz_cost=io(l.cost/l.exposureCount*1e3),l.gz_cost=io(l.cost/l.followCount),l.click_cost=io(l.cost/l.productClickCountPv),l.zh_cost=io(l.cost/l.productOrderCount),l.lr=io(l.productPlaceorderGmv-l.cost),l.indemnifyVoucherAmount=uo(l.indemnifyVoucherAmount/100),l.noCostTime=`${To(l.noCostTime)}`,Bt.value.forEach((e=>{e.n=l[e.key]||"-"}));const t={};let o={};if(l.taskInfo&&l.taskInfo.reqJson){o=JSON.parse(l.taskInfo.reqJson),0===o.feedPromotionOrderInfo.suggest.gender.length?t.gender="不限":t.gender=0===o.feedPromotionOrderInfo.suggest.gender.indexOf(1)?"男":"女",o.feedPromotionOrderInfo.suggest.deviceTypes?t.deviceTypes=0===o.feedPromotionOrderInfo.suggest.deviceTypes.indexOf(1)?"iphone":"安卓":t.deviceTypes="不限",0===o.feedPromotionOrderInfo.suggest.ageRange.length?t.ageRange="不限":(t.ageRange="",o.feedPromotionOrderInfo.suggest.ageRange.forEach((e=>{t.ageRange+=`${Vt[e]}、`}))),0===o.feedPromotionOrderInfo.suggest.interestTag.length?t.interestTag="不限":(t.interestTag="",o.feedPromotionOrderInfo.suggest.interestTag.forEach((e=>{t.interestTag+=`${Ql.get(e)}、`})));const e=[...va,...fa];0===o.feedPromotionOrderInfo.suggest.cityIds.length?t.cityIds="不限":(t.cityIds="",o.feedPromotionOrderInfo.suggest.cityIds.forEach((a=>{var l;t.cityIds+=`${null==(l=da.find(e,["code",a]))?void 0:l.name}、`}))),o.feedPromotionOrderInfo.suggest.similarUsernameList.length>0?t.videoTagArr=o.engineInfo.videoTagArr.join(","):t.videoTagArr="不限"}t.duration=l.duration>0?l.duration/3600+"小时":"-",l.taskInfo&&l.taskInfo.reqJson?t.promotionType=1===o.feedPromotionOrderInfo.promotionType?"智能加热":"定向加热":t.promotionType="-",t.promotionTarget=ea[l.targetType],t.wecoinBid=l.wecoinBid>0?l.wecoinBid:"智能",l.taskInfo&&l.taskInfo.reqJson&&o.feedPromotionOrderInfo.suggest.roiBidX100&&11===o.feedPromotionOrderInfo.promotionTarget&&(t.wecoinBid=o.feedPromotionOrderInfo.suggest.roiBidX100/100+" （ROI）"),l.taskInfo&&l.taskInfo.reqJson?Gt.value.forEach((e=>{"cityIds"===e.key&&"不限"!==t[e.key]&&(e.expandable=!0),"interestTag"===e.key&&"不限"!==t[e.key]&&(e.expandable=!0),e.value=t[e.key]||"-"})):Gt.value=[],l.costCoin=parseInt(10*l.cost,10),l.estimatedWecoinAmount*=10,l.estimatedWecoinAmountBack=l.estimatedWecoinAmount-l.costCoin,Ht.value=Ht.value.map((e=>{if(""!==e.key){if(e.value=l[e.key]?`${l[e.key]}`:"-","estimatedWecoinAmountBack"===e.key&&([4,6].includes(l.plantStatus)?e.value=l[e.key]:e.value="-"),"quota"===e.key){let a=0;l.voucherInfo&&(a=l.voucherInfo.quota/10),e.value=l.voucherInfo?`已抵扣${a}微信豆`:"未使用"}if("estimatedWecoinAmountTruePay"===e.key){let a=0;l.voucherInfo&&(a=l.voucherInfo.quota/10),e.value=l.estimatedWecoinAmount-a>0&&1!==l.plantStatus?l.estimatedWecoinAmount-a:"-"}}return e})),Ut.value=Ut.value.map((e=>("indemnifyVoucherIntoAmount"===e.key&&(e.value=2===Number(l.indemnifyVoucherStatus)?l.indemnifyVoucherAmount:"-"),"indemnifyVoucherIntoAmount"===e.key&&(e.value=2===Number(l.indemnifyVoucherStatus)?l.indemnifyVoucherAmount:"-"),"indemnifyVoucherAmount"===e.key&&(e.value=l[e.key]),"indemnifyTs"===e.key&&(e.value=l[e.key]?h.unix(Number(l[e.key])).format("YYYY-MM-DD"):"-"),e))),Nt.value=!1,(async()=>{Et.value=!0;const{data:e}=await Ee({plantId:mt.value.plantId,pageIndex:1,pageSize:200});Rt.value=e.grid,Et.value=!1})(),xo()},Do=async e=>{let a=e.map((e=>e.sphId));a=[...new Set(a)];const{data:l}=await pa({sphId:a});return new Promise(((e,a)=>{let t=!1;for(let o=0;o<l.grid.length;o++)if(2===l.grid[o].sphStatus){t=!0;break}t?a(l):e(l)}))},qo=e=>{if("0"===e.plantCode){let a="该计划创建失败，无法支付";return 2===e.createStatus&&(a="该计划正在创建中，无法支付"),void z.info(a)}Do([e]).then((a=>{let l="undefined";3===e.sphInfo.sphUserType&&(l=e.sphInfo.sphUniqid),It.value=!0,xt.value=`https://channels.weixin.qq.com/promote/pages/mobile_pay?promotionId=${e.plantCode}&type=feed&userType=${e.sphInfo.sphUserType}&corproateId=${l}`,(async e=>{At.value=setInterval((async function(){const a=await ma({sphId:e.sphId,promotionId:e.plantCode});if(1!==Number(a.data.data.order.orderInfo.status))return clearInterval(At.value),z.success({content:"当前订单已支付",duration:5e3}),It.value=!1,yo(),clearInterval(At.value),void(At.value=null);2===Number(a.data.data.order.orderInfo.status)&&(clearInterval(At.value),z.success({content:"订单支付成功",duration:5e3}),It.value=!1,yo(),clearInterval(At.value),At.value=null)}),1500)})(e)})).catch((async e=>{var a;const l=e.grid.map((e=>e.sphName));null==(a=De.value)||a.showModel(l)}))},Yo=async e=>{var a;if(await(null==(a=jl.value)?void 0:a.validate()))e(!1);else{try{const{data:e}=await Me({plantId:vt.value.join(","),groupId:Pl.value.groupId,groupType:Pl.value.groupType,addName:Pl.value.addName});z.success({content:"更新分组成功",duration:5e3})}catch(l){}finally{Wt.value=!1,yo()}e(!1),Ol.value=!1}},Oo=async e=>{var a;if(await(null==(a=Ml.value)?void 0:a.validate()))e(!1);else{try{const{data:e}=await Me({plantId:vt.value.join(","),packageId:zl.value.packageId,packageType:zl.value.packageType,addName:zl.value.addName});z.success({content:"更新计划包成功",duration:5e3})}catch(l){}finally{Wt.value=!1,yo()}e(!1),Kl.value=!1}};d([]);const Po=async e=>{};function jo(e){const a=[];e.filter((e=>{gl.value.fixColums.includes(e)||a.push(e)})),a.length?u({customColumnValue:JSON.stringify(a),type:1}):u({customColumnValue:"[]",type:1})}return(async()=>{const{data:e}=await Se();return new Promise(((a,l)=>{e.grid&&(po.value=e.grid.map((e=>({memberDepId:e.memberDepId,memberDepName:e.memberDepName})))),a(co.value)}))})().then((e=>{ro({...ct.value,...et})})),a({fetchData:ro}),N((()=>_l.value),((e,a)=>{})),(e,a)=>{const l=r("t-guide"),t=r("Breadcrumb"),o=_,u=w,d=I,C=G,T=r("t-option"),V=r("t-select"),S=U,N=r("icon-edit"),A=H,K=r("icon-arrow-fall"),B=r("icon-arrow-rise"),Te=R,Ve=E,Se=$,qe=J,Ye=Ie,Oe=F,Pe=L,je=xe,Ae=W,Ke=Q,Me=X,Be=Z,Ge=Ce,He=ee,Re=ae,Ee=le,ea=r("icon-question-circle"),aa=te,la=oe,ta=ne,oa=ie,ia=r("icon-question-circle-fill"),ua=ue,da=se,ra=r("icon-refresh"),pa=r("icon-settings"),ma=de,va=r("icon-unordered-list"),fa=r("icon-down"),ga=r("t-dropdown-item"),ha=r("t-dropdown-menu"),_a=r("t-dropdown"),ka=r("icon-exclamation-circle-fill"),El=re,Wl=ce,Ql=pe,Zl=r("t-table"),et=b,ft=k,ht=M,_t=r("icon-plus"),bt=me,kt=ve,Vt=fe,At=ye,Lt=ge,Zt=he,so=_e,ro=be;return c(),D("div",Ta,[y("div",Va,[v(l,{modelValue:ya.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ya.value=e),steps:Cl,"hide-prev":"","on-finish":Vl,"on-skip":Tl},null,8,["modelValue"]),v(t,{items:["投流管理","投放数据"]}),v(u,null,{default:m((()=>[v(o,{flex:1},{default:m((()=>[y("div",Sa,[(c(!0),D(q,null,Y(Tt.value,((e,a)=>(c(),D("div",{key:a,class:j(["btn tabText",{active:wt.value===a}]),onClick:e=>(async e=>{wt.value=e,Yt.value=[],Dt.value=!1,Ot.value=1,jt.value=0,qt.value=!1;const a=ct.value;ct.value=nt(),ct.value.startDate=a.startDate,ct.value.endDate=a.endDate,await zt(),await yo()})(a)},P(e.name),11,Na)))),128))])])),_:1})])),_:1}),v(u,{gutter:24},{default:m((()=>[0!==wt.value?(c(),p(o,{key:0,span:5,xl:{span:5},xxl:{span:4}},{default:m((()=>[v(Ke,{class:"general-card-upai2 plantLeftItem",style:{width:"100%"}},{default:m((()=>[v(Ae,{hoverable:!0,scrollbar:!0,bordered:!1,"max-height":1537,onReachBottom:zt},{"scroll-loading":m((()=>[Dt.value?(c(),D("div",Da,"暂无更多数据")):(c(),p(d,{key:1}))])),default:m((()=>[v(C,{modelValue:Kt.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Kt.value=e),placeholder:"请输入名称搜索","search-button":"",style:{"margin-bottom":"10px"},onPressEnter:a[2]||(a[2]=e=>{Yt.value=[],Ot.value=1,zt()}),onSearch:a[3]||(a[3]=e=>{Yt.value=[],Ot.value=1,zt()})},null,8,["modelValue"]),4===Tt.value[wt.value].id?(c(),p(u,{key:0,style:{width:"100%","margin-bottom":"12px"},justify:"space-between"},{default:m((()=>[v(o,{flex:"1"},{default:m((()=>[v(V,{modelValue:Pt.orderKey,"onUpdate:modelValue":a[4]||(a[4]=e=>Pt.orderKey=e),class:"dateType",placeholder:"排序字段",style:{width:"100%","font-size":"12px"}},{default:m((()=>[v(T,{value:"createdAt",label:"创建时间"}),v(T,{value:"cost",label:"消耗"})])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),(c(!0),D(q,null,Y(Yt.value,((e,a)=>(c(),p(je,{key:a,class:j({"plantTab-select":jt.value===a}),style:{position:"relative"},onClick:l=>(async(e,a)=>{jt.value=a;const l=["","","groupId","goodsId","videoId","sphId","investedId","srId"],t=Tt.value[wt.value].id;6===t?(ct.value[l[t]]=e.id,ct.value.sphId=0):ct.value[l[t]]=e[l[t]],await yo()})(e,a)},{default:m((()=>[ke(y("img",qa,null,512),[[we,9999===e.sort]]),v(A,{style:{"margin-bottom":"10px"}},{default:m((()=>[2===Tt.value[wt.value].id?(c(),D("div",Ya,[v(A,{size:[0,0],align:"baseline"},{default:m((()=>[y("div",Oa,[v(A,null,{default:m((()=>[v(S,{bold:9999!==e.sort,style:{"margin-bottom":"0"}},{default:m((()=>[f(P(e.groupName),1)])),_:2},1032,["bold"]),v(N,{style:{cursor:"pointer"},onClick:a=>{return l=e,ql.name=l.groupName,ql.groupId=l.groupId,void(Jl.value=!0);var l}},null,8,["onClick"])])),_:2},1024)]),v(Ve,{content:9999===e.sort?"取消置顶":"置顶分组"},{default:m((()=>[v(Te,{class:"zhiding",style:{"z-index":"99"},onClick:a=>(async e=>{await ze({groupId:e.groupId,sort:9999===e.sort?0:9999}),z.info(9999===e.sort?"取消置顶":"置顶成功"),Yt.value=[],Ot.value=1,zt()})(e)},{icon:m((()=>[9999===e.sort?(c(),p(K,{key:0})):(c(),p(B,{key:1}))])),_:2},1032,["onClick"])])),_:2},1032,["content"])])),_:2},1024)])):O("",!0),3===Tt.value[wt.value].id?(c(),p(S,{key:1,style:{"margin-bottom":"0"},ellipsis:{rows:1,expandable:!0}},{default:m((()=>[f(P(e.goodsName?e.goodsName:"-"),1)])),_:2},1024)):O("",!0),7===Tt.value[wt.value].id?(c(),p(S,{key:2,style:{"margin-bottom":"0"},ellipsis:{rows:2,expandable:!1}},{default:m((()=>[f(P(e.srName?e.srName:"-"),1)])),_:2},1024)):O("",!0),5===Tt.value[wt.value].id?(c(),p(A,{key:3,direction:"vertical",fill:""},{default:m((()=>[y("div",Pa,[v(Se,{style:{"margin-right":"2px"},size:40,"image-url":e.sphAvatar},null,8,["image-url"]),v(A,{direction:"vertical",fill:""},{default:m((()=>[v(S,{style:{"margin-bottom":"0"}},{default:m((()=>[f(P(e.sphName),1)])),_:2},1024),v(S,{style:{"margin-bottom":"0"}},{default:m((()=>[f(" 备注："+P(e.sphRemark),1)])),_:2},1024)])),_:2},1024)])])),_:2},1024)):O("",!0),6===Tt.value[wt.value].id?(c(),p(A,{key:4,direction:"vertical",fill:""},{default:m((()=>[y("div",ja,[v(Se,{style:{"margin-right":"2px"},size:40,"image-url":e.videoAvatar},null,8,["image-url"]),v(A,{direction:"vertical",fill:""},{default:m((()=>[v(A,null,{default:m((()=>[v(S,{style:{"margin-bottom":"0"},ellipsis:{rows:1,expandable:!1}},{default:m((()=>[f(P(e.videoNickName||"-"),1)])),_:2},1024),v(Ve,{content:9999===e.sort?"取消置顶":"置顶分组"},{default:m((()=>[v(Te,{class:"zhiding",style:{"z-index":"99"},onClick:a=>(async e=>{await Je({id:e.id,sort:9999===e.sort?0:9999}),z.info(9999===e.sort?"取消置顶":"置顶成功"),Yt.value=[],Ot.value=1,zt()})(e)},{icon:m((()=>[9999===e.sort?(c(),p(K,{key:0})):(c(),p(B,{key:1}))])),_:2},1032,["onClick"])])),_:2},1032,["content"])])),_:2},1024),v(S,{style:{"margin-bottom":"0"},ellipsis:{rows:1,expandable:!1}},{default:m((()=>[f(P(e.signature||"-"),1)])),_:2},1024)])),_:2},1024)])])),_:2},1024)):O("",!0),4===Tt.value[wt.value].id?(c(),p(qe,{key:5,class:"plantVideo",src:e.coverUrl,width:"48px",height:"64px"},null,8,["src"])):O("",!0),4===Tt.value[wt.value].id?(c(),p(A,{key:6,direction:"vertical",fill:""},{default:m((()=>[v(A,{align:"start"},{default:m((()=>[v(S,{ellipsis:{rows:2,expandable:!1}},{default:m((()=>[f(P(e.description?e.description:e.signature?e.signature:"---"),1)])),_:2},1024),v(Ve,{content:9999===e.sort?"取消置顶":"置顶分组"},{default:m((()=>[v(Te,{class:"zhiding",style:{"z-index":"99"},onClick:a=>(async e=>{await $e({videoId:e.videoId,sort:9999===e.sort?0:9999}),z.info(9999===e.sort?"取消置顶":"置顶成功"),Yt.value=[],Ot.value=1,zt()})(e)},{icon:m((()=>[9999===e.sort?(c(),p(K,{key:0})):(c(),p(B,{key:1}))])),_:2},1032,["onClick"])])),_:2},1032,["content"])])),_:2},1024),v(S,{style:{"font-size":"10px"}},{default:m((()=>[f(P(e.createdAt),1)])),_:2},1024)])),_:2},1024)):O("",!0)])),_:2},1024),7!==Tt.value[wt.value].id?(c(),p(Pe,{key:0,size:"mini",column:2,layout:"inline-vertical",align:"left"},{default:m((()=>[v(Oe,{label:"消耗"},{default:m((()=>[v(Ye,{value:e.cost||0,precision:2},null,8,["value"])])),_:2},1024),v(Oe,{label:"成交金额"},{default:m((()=>[v(Ye,{value:e.productPlaceorderGmv||0,precision:2},null,8,["value"])])),_:2},1024),v(Oe,{label:"成交ROI"},{default:m((()=>[v(Ye,{value:e.productPlaceorderGmv>0?e.productPlaceorderGmv/e.cost:0,precision:2},null,8,["value"])])),_:2},1024),v(Oe,{label:"利润"},{default:m((()=>[v(Ye,{value:e.productPlaceorderGmv>0?e.productPlaceorderGmv-e.cost:0,precision:2},null,8,["value"])])),_:2},1024)])),_:2},1024)):O("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})])),_:1})):O("",!0),v(o,{span:0==wt.value?24:19,xl:{span:0==wt.value?24:19},xxl:{span:0==wt.value?24:20}},{default:m((()=>[y("div",{ref_key:"hideSearchBar",ref:s,class:"hideSearchBar"},[v(Ke,{class:"general-card-upai",style:{width:"100%"}},{default:m((()=>[v(u,null,{default:m((()=>[v(o,{flex:1},{default:m((()=>[v(oa,{model:ct.value,"auto-label-width":"","label-align":"left"},{default:m((()=>[v(u,{gutter:16},{default:m((()=>[v(o,{span:8},{default:m((()=>[v(Be,{field:"plantName",label:"名称搜索","label-col-flex":"60px"},{default:m((()=>[v(Me,{modelValue:ct.value.plantName,"onUpdate:modelValue":a[5]||(a[5]=e=>ct.value.plantName=e),placeholder:"请输入计划名称","allow-clear":"",onPressEnter:yo},null,8,["modelValue"])])),_:1})])),_:1}),v(o,{span:8},{default:m((()=>[v(Be,{field:"sphId",label:"状态搜索","label-col-flex":"60px"},{default:m((()=>[v(He,{modelValue:ct.value.plantStatus,"onUpdate:modelValue":a[6]||(a[6]=e=>ct.value.plantStatus=e),"allow-clear":"",placeholder:"全部状态"},{default:m((()=>[(c(!0),D(q,null,Y(g(Fe)(g(Le)),((e,a)=>(c(),p(Ge,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),0===wt.value?(c(),p(o,{key:0,span:8},{default:m((()=>[v(Be,{field:"sphId","label-col-flex":"80px"},{label:m((()=>[Aa])),default:m((()=>[v(He,{modelValue:ct.value.sphId,"onUpdate:modelValue":a[7]||(a[7]=e=>ct.value.sphId=e),"allow-clear":"",placeholder:"全部投手号"},{default:m((()=>[(c(!0),D(q,null,Y($t.value,((e,a)=>(c(),p(Ge,{key:a,label:e.sphName,value:e.sphId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),0===wt.value?(c(),p(o,{key:1,span:8},{default:m((()=>[v(Be,{field:"investedId","label-col-flex":"80px"},{label:m((()=>[Ka])),default:m((()=>[v(He,{modelValue:ct.value.investedId,"onUpdate:modelValue":a[8]||(a[8]=e=>ct.value.investedId=e),"allow-clear":"",placeholder:"全部被投号"},{default:m((()=>[(c(!0),D(q,null,Y(Jt.value,((e,a)=>(c(),p(Ge,{key:a,label:e.videoNickName,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),0===wt.value?(c(),p(o,{key:2,span:8},{default:m((()=>[v(Be,{field:"packageId","label-col-flex":"60px"},{label:m((()=>[za])),default:m((()=>[v(He,{modelValue:ct.value.packageId,"onUpdate:modelValue":a[9]||(a[9]=e=>ct.value.packageId=e),"allow-search":"","allow-clear":"",placeholder:"输入计划包名称进行搜索",onSearch:xl,onClear:a[10]||(a[10]=e=>Il(""))},{default:m((()=>[(c(!0),D(q,null,Y(wa.value,((e,a)=>(c(),p(Ge,{key:a,label:e.packageName,value:e.packageId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),0===wt.value?(c(),p(o,{key:3,span:8},{default:m((()=>[v(Be,{field:"videoId",label:"视频ID搜索","label-col-flex":"60px"},{default:m((()=>[v(Re,{modelValue:ct.value.videoId,"onUpdate:modelValue":a[11]||(a[11]=e=>ct.value.videoId=e),placeholder:"请输入视频ID","allow-clear":"",onPressEnter:yo},null,8,["modelValue"])])),_:1})])),_:1})):O("",!0),0===wt.value?(c(),p(o,{key:4,span:8},{default:m((()=>[v(Be,{field:"goodsId",label:"商品搜索","label-col-flex":"60px"},{default:m((()=>[v(He,{modelValue:ct.value.goodsId,"onUpdate:modelValue":a[12]||(a[12]=e=>ct.value.goodsId=e),placeholder:"全部商品","allow-search":"","allow-clear":""},{default:m((()=>[(c(!0),D(q,null,Y(Ft.value,((e,a)=>(c(),p(Ge,{key:a,label:e.goodsName,value:e.goodsId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})):O("",!0),v(o,{span:8},{default:m((()=>[v(Be,{field:"memberDepId",label:"所属部门","label-col-flex":"60px"},{default:m((()=>[v(Ee,{modelValue:ct.value.memberDepId,"onUpdate:modelValue":a[13]||(a[13]=e=>ct.value.memberDepId=e),options:Ia.value,"check-strictly":"","allow-clear":"","field-names":{value:"memberDepId",label:"memberDepName"},placeholder:"请选择所属部门",onClear:e.clearDep},null,8,["modelValue","options","onClear"])])),_:1})])),_:1}),v(o,{span:8},{default:m((()=>[v(Be,{field:"createdTime","label-col-flex":"80px"},{label:m((()=>[v(A,null,{default:m((()=>[v(V,{modelValue:ct.value.dateType,"onUpdate:modelValue":a[14]||(a[14]=e=>ct.value.dateType=e),class:"dateType",placeholder:"时间维度",style:{width:"99px","font-size":"12px"},onChange:a[15]||(a[15]=e=>yo())},{default:m((()=>[v(T,{value:1,label:"创建时间"}),v(T,{value:2,label:"更新时间"})])),_:1},8,["modelValue"]),v(Ve,{title:""},{content:m((()=>[Ma,Ba])),default:m((()=>[v(ea,{style:{"font-size":"16px"}})])),_:1})])),_:1})])),default:m((()=>[v(aa,{modelValue:gt.value,"onUpdate:modelValue":a[16]||(a[16]=e=>gt.value=e),"show-time":"","default-value":[g(h)().startOf("date").format("YYYY-MM-DD HH:mm:ss"),g(h)().endOf("date").format("YYYY-MM-DD HH:mm:ss")],style:{width:"100%"},shortcuts:Gl,"shortcuts-position":"left",onChange:no},null,8,["modelValue","default-value"])])),_:1})])),_:1}),0!==wt.value?(c(),p(o,{key:5,span:8})):O("",!0),0!==wt.value?(c(),p(o,{key:6,span:8})):O("",!0),v(o,{span:8},{default:m((()=>[v(Be,{field:"number","hide-label":!0},{default:m((()=>[v(A,{size:18},{default:m((()=>[v(la,{type:"primary",class:"searchBtn",onClick:yo},{default:m((()=>[f(" 筛选 ")])),_:1}),v(la,{type:"outline",class:"refreshBtn",onClick:a[17]||(a[17]=e=>yo())},{default:m((()=>[f(" 刷新 ")])),_:1}),v(ta,{type:"primary"},{default:m((()=>[v(Te,{href:"javascript:void(0)",onClick:a[18]||(a[18]=e=>(ct.value=nt(),void(gt.value=[h().startOf("date").format("YYYY-MM-DD HH:mm:ss"),h().endOf("date").format("YYYY-MM-DD HH:mm:ss")])))},{default:m((()=>[f("重置筛选条件")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1}),v(u,{style:{"margin-bottom":"16px"}},{default:m((()=>[v(o,{flex:"auto"},{default:m((()=>[v(da,{cols:6,"col-gap":12,"row-gap":12,class:"grid-demo-grid",collapsed:Hl.value},{default:m((()=>[(c(!0),D(q,null,Y(Mt.value,((e,a)=>(c(),p(ua,{key:a},{default:m((()=>[y("div",Ga,[y("div",Ua,[y("img",{src:e.url,class:"y",alt:""},null,8,Ha),f(" "+P(e.t)+" ",1),e.tips?(c(),p(Ve,{key:0},{content:m((()=>[y("p",null,P(e.tips),1),y("p",null,P(e.tips2),1)])),default:m((()=>[v(ia)])),_:2},1024)):O("",!0)]),y("div",Ra,[2===e.type&&"-"!=e.n?(c(),D("span",Ea,"¥")):O("",!0),y("span",null,P(2===e.type?io(e.n):e.n),1)])])])),_:2},1024)))),128)),v(ua,{span:24,style:{background:"#fff"}},{default:m((()=>[v(xa,{ref_key:"dataOverView",ref:x},null,512)])),_:1})])),_:1},8,["collapsed"])])),_:1}),v(o,{flex:"110px"},{default:m((()=>[v(la,{type:"primary",class:"searchBtn",style:{float:"right"},onClick:Rl},{default:m((()=>[f(P(Hl.value?"展开":"收起"),1)])),_:1})])),_:1})])),_:1})],512),v(Ke,{class:"general-card-upai",style:{width:"100%","padding-bottom":"28px"}},{default:m((()=>[v(u,{justify:"space-between"},{default:m((()=>[v(o,{flex:"250px"},{default:m((()=>[v(A,{size:18,style:{"margin-bottom":"10px"}},{default:m((()=>[v(la,{type:"primary",class:"searchBtn",onClick:go},{icon:m((()=>[v(ra)])),default:m((()=>[f(" 刷新数据 ")])),_:1}),v(ma,{content:"确定要关停选中计划？",onOk:Io},{default:m((()=>[v(la,{type:"primary",class:"searchBtn"},{icon:m((()=>[v(pa)])),default:m((()=>[f(" 关停 ")])),_:1})])),_:1}),v(la,{type:"primary",class:"searchBtn",onClick:a[19]||(a[19]=e=>lo(null))},{icon:m((()=>[v(pa)])),default:m((()=>[f(" 自动关停配置 ")])),_:1}),v(la,{type:"primary",class:"searchBtn",onClick:a[20]||(a[20]=e=>(async()=>{0!==vt.value.length?Kl.value=!0:z.info("请先选择需要添加到计划包的计划")})())},{icon:m((()=>[v(pa)])),default:m((()=>[f(" 添加到计划包 ")])),_:1}),v(la,{type:"primary",class:"searchBtn",onClick:a[21]||(a[21]=e=>(async()=>{0!==vt.value.length?Ol.value=!0:z.info("请先选择需要添加到分组的计划")})())},{icon:m((()=>[v(pa)])),default:m((()=>[f(" 添加到分组 ")])),_:1}),v(ma,{content:Ll.value,"popup-visible":$l.value,"ok-text":"确认删除",onPopupVisibleChange:ut,onOk:a[22]||(a[22]=e=>ko(null))},{default:m((()=>[v(la,{type:"primary",status:"danger"},{default:m((()=>[f("删除计划")])),_:1})])),_:1},8,["content","popup-visible"]),v(_a,{"min-column-width":88,trigger:"hover"},{default:m((()=>[v(la,{type:"primary",status:"success",class:"searchBtn"},{icon:m((()=>[v(va)])),default:m((()=>[v(A,null,{default:m((()=>[f(" 导出 "),v(fa)])),_:1})])),_:1}),v(ha,null,{default:m((()=>[v(ga,{value:1,divider:!0,onClick:a[23]||(a[23]=e=>{M.info({title:"提示",content:"是否导出选中数据？",simple:!1,hideCancel:!1,cancelText:"取消",async onOk(){vo()}})})},{default:m((()=>[v(la,{type:"text",style:{width:"100%"}},{default:m((()=>[f(" 导出 ")])),_:1})])),_:1}),v(ga,{value:2,onClick:mo},{default:m((()=>[v(la,{type:"text",style:{width:"100%"}},{default:m((()=>[f(" 报表列表 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),v(o,{flex:"60px"},{default:m((()=>[v(A,{size:18,style:{"margin-bottom":"10px"}},{default:m((()=>[v(la,{type:"primary",class:"setTable",onClick:a[24]||(a[24]=e=>Ca.value=!0)},{icon:m((()=>[v(pa)])),default:m((()=>[f(" 自定义列表 ")])),_:1})])),_:1})])),_:1})])),_:1}),v(Zl,{displayColumns:_l.value,"onUpdate:displayColumns":a[25]||(a[25]=e=>_l.value=e),"row-key":"plantId","drag-sort":"col",data:pt.value,"header-affixed-top":!0,"max-height":1e3,columns:bl.value,loading:g(Xl),pagination:at,bordered:!1,"table-layout":"fixed","on-display-columns-change":Po,onSelectChange:oo,onSortChange:ho,onPageChange:fo},{plantNameId:m((({row:e})=>[v(A,{direction:"vertical",fill:""},{default:m((()=>[v(S,{style:{"margin-bottom":"10px"},ellipsis:{rows:1,expandable:!1}},{default:m((()=>[y("div",$a,[y("span",{class:j(["ove",e.plantCode==e.plantName?"":"big"])},P(e.plantName||"-"),3),e.plantCode==e.plantName?(c(),D("span",Ja,[Fa,f("官方 ")])):O("",!0)])])),_:2},1024),y("div",La,[f(" ID: "),v(S,{copyable:"",style:{"margin-bottom":"0"}},{default:m((()=>[f(P(e.plantCode||"-"),1)])),_:2},1024)])])),_:2},1024)])),plantVideo:m((({row:e})=>[v(A,null,{default:m((()=>[v(qe,{src:e.videoInfo.coverUrl||"http://lf1-xgcdn-tos.pstatp.com/obj/vcloud/vadmin/start.8e0e4855ee346a46ccff8ff3e24db27b.png",width:"40px",height:"50px",style:{width:"40px",height:"50px"}},null,8,["src"]),v(A,{direction:"vertical",fill:"",size:3},{default:m((()=>[v(S,{ellipsis:{rows:1,expandable:!0}},{default:m((()=>[f(P(e.goodsInfo?e.goodsInfo.goodsName:e.videoInfo.signature?e.videoInfo.signature:"-"),1)])),_:2},1024),y("div",Wa,[f(" ID: "),v(S,{copyable:"",style:{"margin-bottom":"0"}},{default:m((()=>[f(P(e.videoId||"-"),1)])),_:2},1024)]),y("div",Qa,[v(Se,{style:{"margin-right":"2px"},size:24,"image-url":e.videoInfo.videoAvatar},null,8,["image-url"]),v(S,{copyable:"",style:{"margin-bottom":"0"}},{default:m((()=>[f(P(e.videoInfo.videoNickName||"-"),1)])),_:2},1024)])])),_:2},1024)])),_:2},1024)])),indemnifyVoucherAmountRoi:m((({row:e})=>[f(P(e.indemnifyVoucherAmountRoi||"-"),1)])),op:m((({row:e})=>[v(A,{direction:"vertical",fill:""},{default:m((()=>[e.errorMsg?(c(),p(Ve,{key:0,content:e.errorMsg},{default:m((()=>[v(El,{color:Yl[e.plantStatus]},{icon:m((()=>[v(ka,{style:{color:"#fff"}})])),default:m((()=>[f(" "+P(g(Le)[e.plantStatus]||"-"),1)])),_:2},1032,["color"])])),_:2},1032,["content"])):(c(),p(El,{key:1,color:Yl[e.plantStatus]},{default:m((()=>[f(P(g(Le)[e.plantStatus]||"-"),1)])),_:2},1032,["color"])),v(A,null,{default:m((()=>[[2,5,101].includes(e.plantStatus)?(c(),p(ma,{key:0,type:"warning",content:"确定要关停【"+e.plantName+"】计划吗?",onOk:a=>(async e=>{try{Do([e]).then((async a=>{const{data:l}=await ca({plantId:e.plantId});z.success({content:"请求关停成功",duration:5e3}),yo()})).catch((e=>{var a;const l=e.grid.map((e=>e.sphName));yo(),null==(a=De.value)||a.showModel(l)}))}catch(a){}})(e)},{default:m((()=>[v(Te,{onClick:a=>Ct.value=e.plantId},{default:m((()=>[f("关停")])),_:2},1032,["onClick"])])),_:2},1032,["content","onOk"])):O("",!0),1===e.plantStatus?(c(),p(Te,{key:1,status:"success",onClick:a=>qo(e)},{default:m((()=>[f("支付")])),_:2},1032,["onClick"])):O("",!0),v(Te,{onClick:a=>(async e=>{if(e.plantCode.includes(e.plantName))return z.info("同步官方创建的计划暂不支持复投");if(!e.taskId)return z.info("暂不支持复投。");const{data:a}=await Ue({taskId:e.taskId});a.reqJson=JSON.parse(a.reqJson),a.reqJson.createTaskBefore=0,a.reqJson=JSON.stringify(a.reqJson),localStorage.setItem("createPlant",a.reqJson),yt.push({name:"createPlant"})})(e)},{default:m((()=>[f("复投")])),_:2},1032,["onClick"]),v(Te,{onClick:a=>No(e)},{default:m((()=>[f("详情")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),process:m((({row:e})=>[v(Wl,{percent:Number(io(e.cost/e.estimatedWecoinAmount)),style:{width:"50%"}},null,8,["percent"])])),cancelPlant:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[v(A,null,{default:m((()=>[v(Ql,{modelValue:e.shutdownSwitch,"onUpdate:modelValue":a=>e.shutdownSwitch=a,disabled:""},null,8,["modelValue","onUpdate:modelValue"]),v(Te,{onClick:a=>lo(e)},{icon:m((()=>[v(N)])),_:2},1032,["onClick"])])),_:2},1024),y("span",null,P(g(We)[e.shutdownStatus]),1)])),_:2},1024)])),voucherQuota:m((({row:e})=>[f(P(e.voucherQuota||"-"),1)])),noCostTime:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[y("span",null,P(e.noCostTime?To(e.noCostTime):0),1)])),_:2},1024)])),createdCancelTime:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[y("span",null,"创建："+P(e.createdAt),1),y("span",null,"关闭："+P(e.cancelTime||"-"),1)])),_:2},1024)])),startEndTime:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[y("span",null,"开始："+P(e.startTime||"-"),1),y("span",null,"结束: "+P(e.endTime||"-"),1)])),_:2},1024)])),startCostTime:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[y("span",null,P(e.startCostTime||"-"),1)])),_:2},1024)])),newMemberDepName:m((({row:e})=>[v(A,{direction:"vertical"},{default:m((()=>[y("span",null,P(e.newMemberDepName||"-"),1)])),_:2},1024)])),indemnifyVoucherAmount:m((({row:e})=>[v(A,null,{default:m((()=>[y("span",null,P(e.indemnifyVoucherAmount?"¥"+e.indemnifyVoucherAmount/100:"-"),1)])),_:2},1024)])),indemnifyVoucherIntoAmount:m((({row:e})=>[v(A,null,{default:m((()=>[y("span",null,P(e.indemnifyVoucherIntoAmount||"-"),1)])),_:2},1024)])),indemnifyVoucherStatus:m((({row:e})=>[y("span",null,P(g(Qe)[e.indemnifyVoucherStatus]||"-"),1)])),indemnifyTs:m((({row:e})=>[y("span",null,P(e.indemnifyTs?g(h).unix(Number(e.indemnifyTs)).format("YYYY-MM-DD"):"-"),1)])),_:1},8,["displayColumns","data","columns","loading","pagination"])])),_:1})])),_:1},8,["span","xl","xxl"])])),_:1})]),v(ht,{visible:Kl.value,"onUpdate:visible":a[29]||(a[29]=e=>Kl.value=e),title:"添加到计划包",onCancel:a[30]||(a[30]=e=>Kl.value=!1),onBeforeOk:Oo},{default:m((()=>[v(oa,{ref_key:"formPackageRef",ref:Ml,model:zl.value,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:m((()=>[v(Be,{field:"packageType",label:"选择计划包",rules:[{required:!0,message:"请选择计划包"}]},{default:m((()=>[v(ft,{modelValue:zl.value.packageType,"onUpdate:modelValue":a[26]||(a[26]=e=>zl.value.packageType=e)},{default:m((()=>[v(et,{value:1},{default:m((()=>[f("创建新计划包")])),_:1}),v(et,{value:2},{default:m((()=>[f("选择已有计划包")])),_:1})])),_:1},8,["modelValue"])])),_:1}),2===zl.value.packageType?(c(),p(Be,{key:0,field:"packageId",label:"选择计划包",rules:[{required:!0,message:"请选择计划包"}]},{default:m((()=>[v(He,{modelValue:zl.value.packageId,"onUpdate:modelValue":a[27]||(a[27]=e=>zl.value.packageId=e),placeholder:"请选择计划包"},{default:m((()=>[(c(!0),D(q,null,Y(Bl.value,((e,a)=>(c(),p(Ge,{key:a,label:e.packageName,value:e.packageId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):O("",!0),1===zl.value.packageType?(c(),p(Be,{key:1,field:"addName",label:"计划包名称",rules:[{required:!0,message:"请填写计划包名称"}]},{default:m((()=>[v(Me,{modelValue:zl.value.addName,"onUpdate:modelValue":a[28]||(a[28]=e=>zl.value.addName=e)},null,8,["modelValue"])])),_:1})):O("",!0)])),_:1},8,["model"])])),_:1},8,["visible"]),v(ht,{visible:Ol.value,"onUpdate:visible":a[34]||(a[34]=e=>Ol.value=e),title:"添加到分组",onCancel:a[35]||(a[35]=e=>Ol.value=!1),onBeforeOk:Yo},{default:m((()=>[v(oa,{ref_key:"formClassRef",ref:jl,model:Pl.value,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:m((()=>[v(Be,{field:"groupType",label:"选择分组",rules:[{required:!0,message:"请选择分组"}]},{default:m((()=>[v(ft,{modelValue:Pl.value.groupType,"onUpdate:modelValue":a[31]||(a[31]=e=>Pl.value.groupType=e)},{default:m((()=>[v(et,{value:1},{default:m((()=>[f("创建新分组")])),_:1}),v(et,{value:2},{default:m((()=>[f("选择已有分组")])),_:1})])),_:1},8,["modelValue"])])),_:1}),2===Pl.value.groupType?(c(),p(Be,{key:0,field:"groupId",label:"选择分组",rules:[{required:!0,message:"请选择分组"}]},{default:m((()=>[v(He,{modelValue:Pl.value.groupId,"onUpdate:modelValue":a[32]||(a[32]=e=>Pl.value.groupId=e),placeholder:"请选择分组"},{default:m((()=>[(c(!0),D(q,null,Y(Al.value,((e,a)=>(c(),p(Ge,{key:a,label:e.groupName,value:e.groupId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})):O("",!0),1===Pl.value.groupType?(c(),p(Be,{key:1,field:"addName",label:"分组名称",rules:[{required:!0,message:"请填写分组名称"}]},{default:m((()=>[v(Me,{modelValue:Pl.value.addName,"onUpdate:modelValue":a[33]||(a[33]=e=>Pl.value.addName=e)},null,8,["modelValue"])])),_:1})):O("",!0)])),_:1},8,["model"])])),_:1},8,["visible"]),v(ht,{visible:It.value,"onUpdate:visible":a[36]||(a[36]=e=>It.value=e),width:"auto",footer:!1,simple:!0,"hide-cancel":"",onBeforeClose:wo},{title:m((()=>[f(" 支付订单")])),default:m((()=>[v(Ke,{class:"general-card"},{default:m((()=>[v(A,{size:16,direction:"vertical",fill:"",style:{"text-align":"center"}},{default:m((()=>[v(sa,{value:xt.value,size:200,level:"H",style:{position:"relative"}},null,8,["value"]),v(El,{color:"green"},{default:m((()=>[f("请用微信APP扫描二维码")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),v(ht,{visible:Wt.value,"onUpdate:visible":a[40]||(a[40]=e=>Wt.value=e),width:"700px",title:"自动关停配置",onBeforeOk:bo},{default:m((()=>[v(oa,{ref:"formJcRef","auto-label-width":"",model:Xt.value},{default:m((()=>[v(Be,{label:"已选中"},{default:m((()=>[y("span",null,"共"+P(vt.value.length)+"条计划",1)])),_:1}),v(Be,{label:"自动关停开启"},{default:m((()=>[v(Ql,{modelValue:Xt.value.shutdownStatus,"onUpdate:modelValue":a[37]||(a[37]=e=>Xt.value.shutdownStatus=e)},null,8,["modelValue"])])),_:1}),v(Be,{label:"自动关停策略"},{default:m((()=>[v(He,{modelValue:Xt.value.shutdownSetId,"onUpdate:modelValue":a[38]||(a[38]=e=>Xt.value.shutdownSetId=e),placeholder:"请选择自动关停策略",multiple:"",readonly:"",limit:10,onChange:to},{default:m((()=>[(c(!0),D(q,null,Y(Qt.value,((e,a)=>(c(),p(Ge,{key:a,label:e.srName,value:e.srId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(Be,{label:"新建关停策略"},{default:m((()=>[v(la,{type:"primary",onClick:a[39]||(a[39]=e=>(async(e,a)=>{2===e?(dt.value="修改关停策略",Sl.value.srId=a.srId,Sl.value.name=a.srName,Sl.value.firstType=a.firstType,Sl.value.firstVal=a.firstVal,Sl.value.flagType=a.flagType,Sl.value.secondType=a.secondType,Sl.value.secondVal=a.secondVal):(dt.value="新增关停策略",Sl.value={name:null,type:1,firstType:1,firstVal:0,secondType:1,secondVal:0,flagType:1},Sl.value.name=null,ao()),Sl.value.type=e,st.value=!0})(1,null))},{icon:m((()=>[v(_t)])),default:m((()=>[f(" 创建关停策略 ")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"]),v(ht,{visible:Jl.value,"onUpdate:visible":a[42]||(a[42]=e=>Jl.value=e),title:"修改分组名称",width:"500px",onCancel:a[43]||(a[43]=e=>Jl.value=!1),onBeforeOk:_o},{default:m((()=>[v(oa,{ref_key:"formGpNameRef",ref:Dl,model:ql,"auto-label-width":!0},{default:m((()=>[v(Be,{field:"name",label:"分组名称",rules:[{required:!0,message:"请填写分组名称"}]},{default:m((()=>[v(Me,{modelValue:ql.name,"onUpdate:modelValue":a[41]||(a[41]=e=>ql.name=e),placeholder:"请填写分组名称"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"]),v(ht,{visible:st.value,"onUpdate:visible":a[50]||(a[50]=e=>st.value=e),title:dt.value,width:"832px",onCancel:a[51]||(a[51]=e=>st.value=!1),onBeforeOk:eo},{default:m((()=>[v(oa,{ref_key:"formGpRef",ref:Nl,model:Sl.value,"auto-label-width":!0},{default:m((()=>[v(Be,{field:"name",label:"关停策略名称",rules:[{required:!0,message:"请填写关停策略名称"}]},{default:m((()=>[v(Me,{modelValue:Sl.value.name,"onUpdate:modelValue":a[44]||(a[44]=e=>Sl.value.name=e)},null,8,["modelValue"])])),_:1}),v(Be,{field:"name",label:"自动关停条件",rules:[{required:!0,message:"请填写关停策略名称"}]},{default:m((()=>[v(u,{gutter:8},{default:m((()=>[v(o,{span:6},{default:m((()=>[v(Be,{field:"firstType","validate-trigger":"input",rules:[{required:!0,message:"请选择类型"}],"no-style":""},{default:m((()=>[v(He,{modelValue:Sl.value.firstType,"onUpdate:modelValue":a[45]||(a[45]=e=>Sl.value.firstType=e),onChange:ao},{default:m((()=>[(c(!0),D(q,null,Y(g(Fe)(g(Xe)),((e,a)=>(c(),p(Ge,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(o,{span:4},{default:m((()=>[v(Be,{field:"firstVal",rules:[{required:!0,message:"填写对应值"}],"no-style":""},{default:m((()=>[v(A,null,{default:m((()=>[v(Me,{modelValue:Sl.value.firstVal,"onUpdate:modelValue":a[46]||(a[46]=e=>Sl.value.firstVal=e),onChange:ao},null,8,["modelValue"]),y("span",null,P(rt.value[Sl.value.firstType])+",",1)])),_:1})])),_:1})])),_:1}),v(o,{span:4},{default:m((()=>[v(Be,{field:"flagType",rules:[{required:!0,message:"请选择类型"}],"no-style":""},{default:m((()=>[v(He,{modelValue:Sl.value.flagType,"onUpdate:modelValue":a[47]||(a[47]=e=>Sl.value.flagType=e),onChange:ao},{default:m((()=>[(c(!0),D(q,null,Y(g(Fe)(g(Ze)),((e,a)=>(c(),p(Ge,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(o,{span:6},{default:m((()=>[v(Be,{field:"secondType","validate-trigger":"input",rules:[{required:!0,message:"请选择类型"}],"no-style":""},{default:m((()=>[v(He,{modelValue:Sl.value.secondType,"onUpdate:modelValue":a[48]||(a[48]=e=>Sl.value.secondType=e),onChange:ao},{default:m((()=>[(c(!0),D(q,null,Y(g(Fe)(g(Xe)),((e,a)=>(c(),p(Ge,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(o,{span:4},{default:m((()=>[v(Be,{field:"secondVal",rules:[{required:!0,message:"填写对应值"}],"no-style":""},{default:m((()=>[v(A,null,{default:m((()=>[v(Me,{modelValue:Sl.value.secondVal,"onUpdate:modelValue":a[49]||(a[49]=e=>Sl.value.secondVal=e),onChange:ao},null,8,["modelValue"]),y("span",null,P(rt.value[Sl.value.secondType]),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),v(Be,null,{default:m((()=>[v(ta,{type:"secondary"},{default:m((()=>[f(" 提示："),Xa,f(" “并且” 代表两个条件同时满足才触发自动关停 "),Za,f(" “或者” 代表两个条件只需满足其中一个就会触发自动 ")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"]),v(na,{ref_key:"exportList",ref:Ne},null,512),v(ro,{width:980,visible:St.value,"mask-closable":"",footer:!1,header:!1,onCancel:a[55]||(a[55]=e=>St.value=!1)},{title:m((()=>[])),default:m((()=>[v(d,{loading:Nt.value,style:{width:"100%"}},{default:m((()=>[mt.value?(c(),D("div",el,[v(Pe,{style:{"margin-top":"10px","padding-left":"10px"}},{title:m((()=>[y("span",null," 计划名称: "+P(mt.value.plantName),1)])),default:m((()=>[v(Oe,{label:"ID"},{default:m((()=>[f(P(mt.value.plantCode),1)])),_:1}),v(Oe,{label:"投放金额"},{default:m((()=>[f("¥"+P(mt.value.estimatedWecoinAmount/10),1)])),_:1}),v(Oe,{label:"数据更新时间"},{default:m((()=>[f(P(mt.value.updatedAt),1)])),_:1})])),_:1}),v(bt,{style:{margin:"0"}}),v(so,{"default-active-key":"1",style:{"margin-top":"10px",width:"940px"},size:"large","lazy-load":""},{default:m((()=>[v(kt,{key:"1",title:"计划详情",style:{"padding-left":"10px"}},{default:m((()=>[v(A,null,{default:m((()=>[v(qe,{src:mt.value.videoInfo.coverUrl||"http://lf1-xgcdn-tos.pstatp.com/obj/vcloud/vadmin/start.8e0e4855ee346a46ccff8ff3e24db27b.png",width:"80px",height:"100px",style:{width:"80px",height:"100px"}},null,8,["src"]),v(A,{direction:"vertical",fill:""},{default:m((()=>[v(S,null,{default:m((()=>[f(P(mt.value.videoInfo.description||"-"),1)])),_:1}),y("div",al,[v(Se,{style:{"margin-right":"2px"},size:24,"image-url":mt.value.videoInfo.videoAvatar||"http://lf1-xgcdn-tos.pstatp.com/obj/vcloud/vadmin/start.8e0e4855ee346a46ccff8ff3e24db27b.png"},null,8,["image-url"]),v(S,{copyable:"",style:{"margin-bottom":"0"}},{default:m((()=>[f(P(mt.value.videoInfo.videoNickName),1)])),_:1})]),v(S,null,{default:m((()=>[f(P(mt.value.goodsInfo?mt.value.goodsInfo.goodsName:"-"),1)])),_:1})])),_:1}),v(A,null,{default:m((()=>[v(Wl,{type:"circle",percent:Number(io(mt.value.cost/mt.value.estimatedWecoinAmount))},null,8,["percent"]),v(El,{status:"success"},{default:m((()=>[f(P(g(Le)[mt.value.plantStatus]),1)])),_:1})])),_:1})])),_:1}),v(u,{gutter:[55,0]},{default:m((()=>[v(o,{flex:1},{default:m((()=>[y("div",ll,[tl,v(u,{gutter:[10,10]},{default:m((()=>[(c(!0),D(q,null,Y(Bt.value,((e,a)=>(c(),p(o,{key:a,span:5},{default:m((()=>[y("div",ol,[y("div",nl,[y("img",{src:e.url,class:"y",alt:""},null,8,il),f(" "+P(e.t),1)]),y("div",ul,[2===e.type&&"-"!=e.n?(c(),D("span",sl,"¥")):O("",!0),y("span",null,P(2===e.type?io(e.n):e.n),1)])])])),_:2},1024)))),128))])),_:1})])])),_:1})])),_:1}),Gt.value.length?(c(),p(u,{key:0,gutter:[55,0]},{default:m((()=>[v(o,{flex:1},{default:m((()=>[y("div",dl,[rl,v(Pe,{style:{"margin-top":"10px","padding-left":"10px"},column:2,data:Gt.value},{title:m((()=>[])),default:m((()=>[(c(!0),D(q,null,Y(Gt.value,((e,a)=>(c(),p(Oe,{key:a,label:e.label},{default:m((()=>[v(S,{style:{"max-width":"250px"},ellipsis:{rows:1,expandable:e.expandable,showTooltip:!0}},{default:m((()=>[f(P(e.value||"-"),1)])),_:2},1032,["ellipsis"])])),_:2},1032,["label"])))),128))])),_:1},8,["data"])])])),_:1})])),_:1})):O("",!0),v(u,{gutter:[55,0]},{default:m((()=>[v(o,{flex:1},{default:m((()=>[y("div",cl,[pl,v(Pe,{style:{"margin-top":"10px","padding-left":"10px"},column:2,data:Ht.value},{title:m((()=>[])),default:m((()=>[(c(!0),D(q,null,Y(Ht.value,((e,a)=>(c(),p(Oe,{key:a},{label:m((()=>[v(A,null,{default:m((()=>[f(P(e.label)+" ",1),v(Ve,null,{content:m((()=>[y("p",null,P(e.tips),1)])),default:m((()=>[v(ia)])),_:2},1024)])),_:2},1024)])),default:m((()=>[v(S,{style:{"max-width":"250px"},ellipsis:{rows:1,expandable:e.expandable}},{default:m((()=>[f(P(e.value||"-"),1)])),_:2},1032,["ellipsis"])])),_:2},1024)))),128))])),_:1},8,["data"])])])),_:1})])),_:1}),v(u,{gutter:[55,0]},{default:m((()=>[v(o,{flex:1},{default:m((()=>[y("div",ml,[vl,v(Pe,{style:{"margin-top":"10px","padding-left":"10px"},column:2,data:Ut.value},{title:m((()=>[])),default:m((()=>[(c(!0),D(q,null,Y(Ut.value,((e,a)=>(c(),p(Oe,{key:a,label:e.label},{default:m((()=>[v(S,{style:{"max-width":"250px"},ellipsis:{rows:1,expandable:e.expandable}},{default:m((()=>[f(P("indemnifyVoucherAmount"===e.key?"¥":"")+" "+P(e.value||"-")+" ",1)])),_:2},1032,["ellipsis"])])),_:2},1032,["label"])))),128))])),_:1},8,["data"])])])),_:1})])),_:1}),v(u,{justify:"end"},{default:m((()=>[v(o,{flex:"60px"},{default:m((()=>[v(A,null,{default:m((()=>[v(ma,{content:Ll.value,"popup-visible":Fl.value,"ok-text":"确认删除",onPopupVisibleChange:it,onOk:a[52]||(a[52]=e=>ko(mt.value.plantId))},{default:m((()=>[v(la,{type:"primary",status:"danger"},{default:m((()=>[f("删除计划")])),_:1})])),_:1},8,["content","popup-visible"])])),_:1})])),_:1})])),_:1})])),_:1}),v(kt,{key:"2",title:"计划日志",style:{"padding-left":"10px"}},{default:m((()=>[v(At,{pagination:!0,hoverable:!0,stripe:!1,loading:Et.value,data:Rt.value,bordered:!1},{columns:m((()=>[v(Vt,{title:"操作时间",align:"center"},{cell:m((({record:e})=>[f(P(e.createdAt),1)])),_:1}),v(Vt,{title:"行为",align:"center"},{cell:m((({record:e})=>[f(P(e.plantLog),1)])),_:1}),v(Vt,{title:"操作人",align:"center"},{cell:m((({record:e})=>[f(P(-2==e.createUser?"个人/系统":0==e.createUser?"系统":"管理员"),1)])),_:1})])),_:1},8,["loading","data"])])),_:1}),v(kt,{key:"3",title:"阶段数据",style:{"padding-left":"10px"}},{default:m((()=>[v(Zt,{style:{height:"800px",overflow:"auto"}},{default:m((()=>[v(At,{pagination:!1,hoverable:!0,stripe:!1,loading:tt.value,data:lt.value,scroll:Ul,bordered:!1},{columns:m((()=>[v(Vt,{title:"时间",align:"center",width:220},{cell:m((({record:e})=>[f(P(e.createdAt),1)])),_:1}),v(Vt,{title:"消耗金额",align:"center","data—index":"cost",width:240},{default:m((()=>[v(Vt,{title:yl.value,align:"center","data—index":"cost",width:240},{cell:m((({record:e})=>[f(P(e.cost),1)])),_:1},8,["title"])])),_:1}),v(Vt,{title:"阶段消耗",align:"center"},{cell:m((({record:e})=>[f(P(e.stageCost),1)])),_:1}),v(Vt,{title:"阶段订单",align:"center"},{cell:m((({record:e})=>[f(P(e.stageOrderCount),1)])),_:1}),v(Vt,{title:"阶段GMV",align:"center"},{cell:m((({record:e})=>[f(P(e.stageGmv),1)])),_:1}),v(Vt,{title:"阶段点击",align:"center"},{cell:m((({record:e})=>[f(P(e.stageClick),1)])),_:1}),v(Vt,{title:"点击成本",align:"center"},{cell:m((({record:e})=>[f(P(uo(e.stageCost/e.stageClick)),1)])),_:1}),v(Vt,{title:"成交ROI",align:"center"},{cell:m((({record:e})=>[f(P(uo(e.productPlaceorderGmv/e.cost)),1)])),_:1}),v(Vt,{title:"佣金ROI",align:"center"},{cell:m((({record:e})=>[f(P(uo(e.productPlaceorderGmv*(e.yjl/100)/e.cost)),1)])),_:1})])),_:1},8,["loading","data"]),y("div",fl,[y("div",null,[v(Lt,{current:ot.pageIndex,"onUpdate:current":a[53]||(a[53]=e=>ot.pageIndex=e),"page-size":ot.pageSize,"onUpdate:pageSize":a[54]||(a[54]=e=>ot.pageSize=e),total:ot.total,"show-total":!0,"show-page-size":!0,onChange:Co},null,8,["current","page-size","total"])])])])),_:1})])),_:1})])),_:1})])):O("",!0)])),_:1},8,["loading"])])),_:1},8,["visible"]),v(n,{ref_key:"loginSphModal",ref:De},null,512),v(i,{"custom-columns-visable":Ca.value,"onUpdate:customColumnsVisable":a[56]||(a[56]=e=>Ca.value=e),"display-columns":_l.value,"onUpdate:displayColumns":a[57]||(a[57]=e=>_l.value=e),"admange-columns-ref":bl.value,"onUpdate:admangeColumnsRef":a[58]||(a[58]=e=>bl.value=e),columns:bl.value,"sys-default-columns":g(ba),"render-columns":kl.value,"find-key-name-columns":wl.value,group:hl.value,"default-columns":gl.value,onUpdateColumns:jo},null,8,["custom-columns-visable","display-columns","admange-columns-ref","columns","sys-default-columns","render-columns","find-key-name-columns","group","default-columns"])],512)}}}),[["__scopeId","data-v-308f1aeb"]]);export{yl as default};
