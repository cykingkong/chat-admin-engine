import{u as e,k as a,v as t,H as l,I as s,J as i,K as n,_ as o}from"./index.a302575e.js";/* empty css              *//* empty css               *//* empty css                *//* empty css               *//* empty css              *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css              */import{d,f as r,r as c,aU as u,D as p,E as m,aK as g,aJ as v,H as b,u as f,aO as h,aP as x,aM as y,aL as _,aF as j,aG as I,c4 as k,c5 as w,bH as z,c6 as M,c7 as K,c2 as S,bj as L,bM as U,c3 as V,bl as C,bq as T,b9 as B,ba as N,G as P,bR as A}from"./arco.0e1801a1.js";import{u as D}from"./loading.4d3258a0.js";import{Q as E}from"./qrcode.vue.esm.973da956.js";import{f as H}from"./vue.6618b53d.js";import{A as $}from"./enum.5f967a9b.js";import"./copy.33b9be14.js";import"./chart.b4fe0742.js";const q=e=>(B("data-v-955c6f21"),e=e(),N(),e),O={class:"container"},G=q((()=>b("div",{class:"upai_pageTitle"}," 智能监控 ",-1))),J={class:"upai_content_outsideBox"},R={class:"pagination"},F=q((()=>b("div",null,null,-1))),Q={class:"upai_content_outsideBox"},W=q((()=>b("div",{class:"upai_titleLi",style:{"margin-bottom":"22px"}},[b("span",{class:"borderLeft"}),h(" 提示消息配置 ")],-1))),X={class:"upai_content_outsideBox"},Y=q((()=>b("div",{class:"upai_titleLi"},[b("span",{class:"borderLeft"}),h(" 公众号提醒 ")],-1))),Z={class:"qrcodeBorder"},ee=o(d({__name:"smartList",setup(o){const d=r("");r("");e();const B=r(""),N=r(""),q=r();a().then((e=>{N.value=e.data.shareLink,B.value=e.data.authKey,q.value=e.data.userInfo.gzhMsgSwitch}));const ee={};H(),r(!1),r(!1),r([]),r(!1),r(!1),r([]),r(""),r(!1),r(),r(0),r(0),r("修改信息");r({id:void 0,sphType:0,sphRemark:"",type:1}),new Promise((e=>{l().then((a=>{e(a.data)}))})).then((e=>{d.value=e.url})),r({remark:"备注"});const{loading:ae,setLoading:te}=D(!0);t.exports.useI18n();const le=r([]),se=r({});r("");const ie={current:1,pageIndex:1,pageSize:10},ne=c({...ie});c({...ie});const oe=r([]),de=c([{title:"账号离线通知",Key:"1",k:"0",select:!1,disabled:!0},{title:"商品爆单通知",Key:"2",k:"0",select:!1,disabled:!0},{title:"计划关停通知",Key:"3",k:"0",select:!1,disabled:!0},{title:"异常关停通知",Key:"4",k:"0",select:!1,disabled:!0}]),re=r(),ce=r(),ue=async()=>{const{data:e}=await a();B.value=e.authKey,q.value=e.userInfo.gzhMsgSwitch,re.value=e.levelName,ce.value=e.userInfo.memberDepId,oe.value=e.userInfo.memberDepId?e.userInfo.memberMsg.split(","):e.memberMsg.split(",")||[];const t=e.levelMemberMsg.split(",")||[];de.forEach(((a,l)=>{a.k=oe.value.includes(`${a.Key}`)?e.memberMsg[l]:0,a.select=oe.value.includes(`${a.Key}`),t.length&&t.forEach((e=>{e===a.Key&&(a.disabled=!1)}))}))},pe=async()=>{const e=[];de.forEach((a=>{a.select&&e.push(a.Key)})),await n({memberMsg:e.join(",")})},me=async()=>{const{data:e}=await s({gzhMsgSwitch:q.value});e&&ue()};ue();const ge=async e=>{te(!0);try{const{data:a}=await i(e);le.value=a.grid.map((e=>(0===e.memberDepId&&(e.deptName="-"),e))),ne.current=e.pageIndex,ne.pageIndex=e.pageIndex,ne.total=a.total}catch(a){}finally{te(!1)}},ve=e=>{ie.pageIndex=e,ie.current=e,ne.pageIndex=e,ne.current=e,ge({...se.value,...ie})},be=e=>{ie.pageSize=e,ne.pageSize=e,ge({...se.value,...ie})},fe=e=>{e||setTimeout((()=>{ue()}),200)};ge({...se.value,...ie}),r(!1);const he=r(null);return r(0),u((()=>{clearInterval(he.value),he.value=null})),r(),(e,a)=>{const t=k,l=w,s=z,i=M,n=K,o=S,r=A,c=L,u=U,B=V,N=C,D=T;return p(),m("div",O,[G,g(B,{gutter:24,align:"start"},{default:v((()=>[g(o,{flex:"auto"},{default:v((()=>[b("div",J,[g(i,{"row-key":"id",pagination:!1,loading:f(ae),data:le.value,scroll:ee,hoverable:!0,stripe:!1,bordered:!1,onPageChange:ve},{columns:v((()=>[g(t,{title:"操作人",align:"center"},{cell:v((({record:e})=>[h(x(e.memberUserInfo?e.memberUserInfo.memberAccount:"-"),1)])),_:1}),g(t,{title:"所属部门",align:"center"},{cell:v((({record:e})=>[h(x(e.deptName?e.deptName:"-"),1)])),_:1}),g(t,{title:"操作类型",align:"center"},{cell:v((({record:e})=>[g(l,{color:"arcoblue"},{default:v((()=>[h(x(e.logType?f($)[e.logType]:"-"),1)])),_:2},1024)])),_:1}),g(t,{title:"操作详情",align:"center",width:"200"},{cell:v((({record:e})=>[g(s,{ellipsis:{rows:1,showTooltip:!0},style:{"margin-bottom":"0"}},{default:v((()=>[h(x(e.logMsg?e.logMsg:"-"),1)])),_:2},1024)])),_:1}),g(t,{title:"操作时间",align:"center"},{cell:v((({record:e})=>[h(x(e.createdAt?e.createdAt:"-"),1)])),_:1})])),_:1},8,["loading","data"]),b("div",R,[F,b("div",null,[g(n,{current:ne.pageIndex,"onUpdate:current":a[0]||(a[0]=e=>ne.pageIndex=e),"page-size":ne.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>ne.pageSize=e),total:Number(ne.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:ve,onPageSizeChange:be},null,8,["current","page-size","total"])])])])])),_:1}),g(o,{flex:"239px"},{default:v((()=>[g(D,{direction:"vertical",size:24,style:{width:"100%"}},{default:v((()=>[b("div",Q,[W,(p(!0),m(y,null,_(de,((e,t)=>(p(),m("div",{key:t,class:"switchBox"},[e.disabled?(p(),j(r,{key:0,content:`${re.value}无开启权限，请联系客服升级`},{default:v((()=>[b("div",{class:"label",style:P({color:e.disabled?"#777":"#000"})},x(e.title),5)])),_:2},1032,["content"])):(p(),m("div",{key:1,class:"label",style:P({color:e.disabled?"#777":"#000"})},x(e.title),5)),g(u,{content:`确认是否修改${e.title}状态`,onOk:pe,onCancel:a[2]||(a[2]=()=>{}),onPopupVisibleChange:fe},{default:v((()=>[g(c,{modelValue:e.select,"onUpdate:modelValue":a=>e.select=a,disabled:e.disabled,"checked-value":!0,"unchecked-value":!1},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1032,["content"])])))),128))]),b("div",X,[g(B,{justify:"space-between",align:"center",style:{"margin-bottom":"22px"}},{default:v((()=>[g(o,{flex:"90px"},{default:v((()=>[Y])),_:1}),g(o,{flex:"40px"},{default:v((()=>[g(u,{content:"确认是否关闭公众号提醒",onOk:me,onCancel:ue},{default:v((()=>[g(c,{modelValue:q.value,"onUpdate:modelValue":a[3]||(a[3]=e=>q.value=e),"checked-value":1,"unchecked-value":0},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),g(D,{style:{width:"100%"},direction:"vertical",align:"center"},{default:v((()=>[b("div",Z,[d.value?(p(),j(E,{key:0,value:d.value,size:140,level:"H"},null,8,["value"])):I("",!0)]),g(N,{type:"primary",size:"small"},{default:v((()=>[h(" 扫码关注 开启公众号提醒 ")])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-955c6f21"]]);export{ee as default};
