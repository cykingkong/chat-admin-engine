import{_ as e}from"./index.a302575e.js";/* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css               *//* empty css              */import{d as a,f as t,r as l,aH as d,D as i,E as n,H as s,aK as o,aJ as r,aO as u,u as c,aP as p,b_ as m,bk as f,bu as g,bv as v,c2 as x,ce as b,bl as _,by as Y,bG as h,bq as y,c3 as D,bz as w,c8 as j,bQ as M,bH as H,bU as z,c4 as C,bR as I,co as k,c6 as O,c7 as S,be as N,b9 as V,ba as U}from"./arco.0e1801a1.js";import{u as P}from"./loading.4d3258a0.js";import{d as T,e as A,v as G,z as q,A as B}from"./plant.a1deaa45.js";import{h as R}from"./enum.5f967a9b.js";import{f as E}from"./vue.6618b53d.js";import{s as W}from"./sph.fffc74fa.js";import"./chart.b4fe0742.js";const F=e=>(V("data-v-1cd10119"),e=e(),U(),e),J={class:"container"},K={class:"upai_content"},L=F((()=>s("div",{class:"pageTitle"}," 视频管理 ",-1))),Q=F((()=>s("div",{class:"labelText"},"动态搜索：",-1))),X=F((()=>s("div",{class:"labelText"},"创建时间：",-1))),Z={class:"proCode",style:{display:"flex","align-items":"center"}},$=F((()=>s("p",null," 统计创建成功的计划的条数",-1))),ee=F((()=>s("p",null,"截止上一次转化成功(即出单)到目前为止的消耗金额",-1))),ae=F((()=>s("p",{style:{"margin-top":"12px"}},"例如：计划加热中，消耗金额为500¥、出单为0，则空耗值为500",-1))),te={class:"pagination"},le=e(a({__name:"data",setup(e,{expose:a}){const V=[{label:"当日",value:()=>[m().startOf("date").format("YYYY-MM-DD HH:mm:ss"),m().endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"昨日",value:()=>[m().add(-1,"day").startOf("date").format("YYYY-MM-DD HH:mm:ss"),m().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一周",value:()=>[m().add(-1,"week").startOf("date").format("YYYY-MM-DD HH:mm:ss"),m().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一月",value:()=>[m().add(-1,"month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),m().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"本月",value:()=>[m().startOf("month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),m().endOf("date").format("YYYY-MM-DD HH:mm:ss")]}],U={x:3200,y:500},{loading:F,setLoading:le}=P(!0),de=t(!1),ie=t("新建计划包"),ne=t({name:null,type:1}),se=t(),oe={current:1,pageIndex:1,pageSize:10},re=l({...oe}),ue=()=>({startDate:m().add(-1,"month").format("YYYY-MM-DD").toString(),endDate:m().format("YYYY-MM-DD").toString(),pageIndex:1,pageSize:10,taskStatus:-1}),ce=t(ue()),pe=t([]);t(0);const me=t([]),fe=t([]),ge=t([]);(async()=>{const{data:e}=await W({pageIndex:1,pageSize:200,sphType:1});me.value=e.grid})(),(async()=>{const{data:e}=await T({pageIndex:1,pageSize:200});fe.value=e.grid})(),(async()=>{const{data:e}=await A({pageIndex:1,pageSize:200});ge.value=e.grid})();const ve=async e=>{le(!0);try{const{data:a}=await G(e);pe.value=a.grid,re.current=e.pageIndex,re.pageIndex=e.pageIndex,re.total=a.total}catch(a){}finally{le(!1)}},xe=e=>{oe.pageIndex=e,oe.current=e,re.pageIndex=e,re.current=e,ve({...ce.value,...oe})},be=e=>{oe.pageSize=e,re.pageSize=e,ve({...ce.value,...oe})},_e=e=>{ce.value.startDate=e[0],ce.value.endDate=e[1]},Ye=()=>{xe(1)},he=async e=>{var a;await(null==(a=se.value)?void 0:a.validate())?e(!1):(1===ne.value.type?(await q({name:ne.value.name}),f.success({content:"添加计划包成功",duration:5e3}),await Ye()):(await B({packageId:ne.value.packageId,name:ne.value.name}),f.success({content:"修改计划包成功",duration:5e3}),await Ye()),ne.value.name=null,window.setTimeout((()=>{e()}),300))},ye=E(),De=e=>isNaN(e)||0===Number(e)?0:Number(e).toFixed(2),we=t([]);return ve({...ce.value}),a({fetchData:ve}),(e,a)=>{const t=d("Breadcrumb"),l=g,m=v,f=x,P=b,T=_,A=Y,G=h,q=y,B=D,E=w,W=j,le=M,oe=H,me=z,fe=C,ge=d("icon-question-circle-fill"),ve=I,je=k,Me=O,He=S,ze=N;return i(),n("div",J,[s("div",K,[o(t,{items:["投流管理","视频管理"]}),L,o(B,null,{default:r((()=>[o(W,{class:"general-card-upai",style:{width:"100%"}},{default:r((()=>[o(B,null,{default:r((()=>[o(f,{flex:1},{default:r((()=>[o(E,{model:ce.value,"auto-label-width":"","label-align":"left"},{default:r((()=>[o(B,{gutter:16},{default:r((()=>[o(f,{span:8},{default:r((()=>[o(m,{field:"sphName"},{label:r((()=>[Q])),default:r((()=>[o(l,{modelValue:ce.value.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>ce.value.Name=e),placeholder:"请输入动态描述","allow-clear":"",onPressEnter:Ye},null,8,["modelValue"])])),_:1})])),_:1}),o(f,{span:8},{default:r((()=>[o(m,{field:"createdTime"},{label:r((()=>[X])),default:r((()=>[o(P,{modelValue:we.value,"onUpdate:modelValue":a[1]||(a[1]=e=>we.value=e),"show-time":"","default-value":[],style:{width:"100%"},shortcuts:V,"shortcuts-position":"left",onChange:_e},null,8,["modelValue"])])),_:1})])),_:1}),o(f,{span:8},{default:r((()=>[o(m,{field:"number","hide-label":!0},{default:r((()=>[o(q,{size:18},{default:r((()=>[o(T,{type:"primary",class:"searchBtn",onClick:Ye},{default:r((()=>[u(" 筛选 ")])),_:1}),o(T,{type:"outline",class:"refreshBtn",onClick:a[2]||(a[2]=e=>Ye())},{default:r((()=>[u(" 刷新 ")])),_:1}),o(G,{type:"primary"},{default:r((()=>[o(A,{href:"javascript:void(0)",onClick:a[3]||(a[3]=e=>(ce.value=ue(),void(we.value=[])))},{default:r((()=>[u("重置筛选条件")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1}),o(W,{class:"general-card-upai",style:{width:"100%","padding-bottom":"28px"}},{default:r((()=>[o(Me,{"row-key":"id",pagination:!1,hoverable:!0,loading:c(F),stripe:!1,scroll:U,data:pe.value,bordered:!1},{columns:r((()=>[o(fe,{title:"被投视频",align:"left",fixed:"left",width:350},{cell:r((({record:e})=>[o(q,null,{default:r((()=>[o(le,{src:e.coverUrl||"http://lf1-xgcdn-tos.pstatp.com/obj/vcloud/vadmin/start.8e0e4855ee346a46ccff8ff3e24db27b.png",width:"80px",height:"100px",style:{width:"80px",height:"100px"}},null,8,["src"]),o(q,{direction:"vertical",fill:""},{default:r((()=>[o(oe,{ellipsis:{rows:e.signature.lenght>10?2:1,expandable:e.signature.lenght>10,showTooltip:!0}},{default:r((()=>[u(p(e.signature||"-"),1)])),_:2},1032,["ellipsis"]),s("div",Z,[o(me,{style:{"margin-right":"2px"},size:24,"image-url":e.videoAvatar},null,8,["image-url"]),o(oe,{copyable:"",style:{"margin-bottom":"0"}},{default:r((()=>[u(p(e.videoNickName||"-"),1)])),_:2},1024)])])),_:2},1024)])),_:2},1024)])),_:1}),o(fe,{title:"","data-index":"estimatedWecoinAmount",align:"center"},{title:r((()=>[o(q,null,{default:r((()=>[u(" 投放总金额 "),o(ve,{content:"\t统计创建成功的计划投放总金额"},{default:r((()=>[o(ge)])),_:1})])),_:1})])),_:1}),o(fe,{title:"","data-index":"plantCount",align:"center"},{title:r((()=>[o(q,null,{default:r((()=>[u(" 计划条数 "),o(ve,{title:""},{content:r((()=>[$])),default:r((()=>[o(ge)])),_:1})])),_:1})])),_:1}),o(fe,{title:"消耗比例","data-index":"orderSuccess",align:"center",width:170},{cell:r((({record:e})=>[o(je,{percent:Number(De(e.cost/e.estimatedWecoinAmount)),style:{width:"50%"}},null,8,["percent"])])),_:1}),o(fe,{title:"消耗金额","data-index":"cost",align:"center"}),o(fe,{title:"订单数","data-index":"productOrderCount",align:"center"}),o(fe,{title:"营业额","data-index":"productPlaceorderGmv",align:"center"}),o(fe,{title:"ROI","data-index":"productOrderCount",align:"center"},{cell:r((({record:e})=>[u(p(De(e.productPlaceorderGmv/e.cost)),1)])),_:1}),o(fe,{title:"利润","data-index":"",align:"center"},{cell:r((({record:e})=>[u(p(De(e.productPlaceorderGmv-e.cost)),1)])),_:1}),o(fe,{title:"","data-index":"airCost",align:"center"},{title:r((()=>[o(q,null,{default:r((()=>[u(" 空耗值 "),o(ve,{title:""},{content:r((()=>[ee,ae])),default:r((()=>[o(ge)])),_:1})])),_:1})])),_:1}),o(fe,{title:"商品点击","data-index":"productClickCountPv",align:"center"}),o(fe,{title:"浏览","data-index":"exposureCount",align:"center"}),o(fe,{title:"点赞","data-index":"likeCount",align:"center"}),o(fe,{title:"评论","data-index":"favCount",align:"center"}),o(fe,{title:"关注","data-index":"followCount",align:"center"}),o(fe,{title:"加热状态",align:"center"},{cell:r((({record:e})=>[u(p(c(R)[e.hotStatus]),1)])),_:1}),o(fe,{title:"更新时间","data-index":"updatedAt",align:"center"}),o(fe,{align:"center",fixed:"right",title:"操作","data-index":"operations"},{cell:r((({record:e})=>[o(T,{type:"text",size:"small",onClick:a=>{return t=e.videoId,void ye.push({name:"plantData",query:{videoId:t}});var t}},{default:r((()=>[u(" 查看计划 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["loading","data"]),s("div",te,[s("div",null,[o(He,{current:re.pageIndex,"onUpdate:current":a[4]||(a[4]=e=>re.pageIndex=e),"page-size":re.pageSize,"onUpdate:pageSize":a[5]||(a[5]=e=>re.pageSize=e),total:re.total,"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:xe,onPageSizeChange:be},null,8,["current","page-size","total"])])])])),_:1})]),o(ze,{visible:de.value,"onUpdate:visible":a[7]||(a[7]=e=>de.value=e),title:ie.value,onCancel:a[8]||(a[8]=e=>de.value=!1),onBeforeOk:he},{default:r((()=>[o(E,{ref_key:"formGpRef",ref:se,model:ne.value,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:r((()=>[o(m,{field:"name",label:"计划包名称",rules:[{required:!0,message:"请填写计划包名称"}]},{default:r((()=>[o(l,{modelValue:ne.value.name,"onUpdate:modelValue":a[6]||(a[6]=e=>ne.value.name=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-1cd10119"]]);export{le as default};
