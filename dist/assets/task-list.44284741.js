import{_ as a}from"./index.a302575e.js";/* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css              */import{d as e,r as t,f as l,w as d,D as s,E as i,H as n,aK as o,aJ as r,aM as u,aL as p,u as c,aO as f,aP as m,b_ as g,c9 as v,bv as _,c2 as b,bl as x,bq as Y,c3 as h,bz as y,c8 as D,c4 as S,bQ as k,bH as M,c5 as z,c6 as j,c7 as w,aF as I,cd as H,aH as C,aG as V,ce as O,by as U,bG as T,bU as A,be as N,b9 as B,ba as E}from"./arco.0e1801a1.js";import{u as G}from"./loading.4d3258a0.js";import{f as L}from"./vue.6618b53d.js";import{m as P,n as F}from"./sph-aide.33599de6.js";import{e as q,D as J,E as K,k as Q,F as R,G as W}from"./enum.5f967a9b.js";/* empty css               */import"./chart.b4fe0742.js";const X={class:"container-task-info"},Z={class:"upai_content"},$={class:"proCode",style:{display:"flex","align-items":"center"}},aa={class:"proCode",style:{display:"flex","align-items":"center"}},ea={class:"pagination"},ta=a(e({__name:"task-info-list",props:{id:{type:Number,default:0}},setup(a,{expose:e}){const C=a,{loading:V,setLoading:O}=G(!0),U={current:1,pageIndex:1,pageSize:10},T=t({...U}),A=l(C.id),N=l({startDate:g().add(-1,"month").format("YYYY-MM-DD").toString(),endDate:g().format("YYYY-MM-DD").toString(),pageIndex:1,pageSize:10,taskStatus:-1,taskAideId:A.value}),B=l([]);l(0),d((()=>C.id),((a,e)=>{N.value.taskAideId=a,R()}));const E=async a=>{O(!0);try{const{data:e}=await P(a);B.value=e.grid,T.current=a.pageIndex,T.pageIndex=a.pageIndex,T.total=e.total}catch(e){}finally{O(!1)}},F=a=>{U.pageIndex=a,U.current=a,T.pageIndex=a,T.current=a,E({...N.value,...U})},Q=a=>{U.pageSize=a,T.pageSize=a,E({...N.value,...U})},R=()=>{F(1)};return L(),l([]),C.id>0&&E({...N.value}),e({fetchData:E}),(a,e)=>{const t=H,l=v,d=_,g=b,C=x,O=Y,U=h,A=y,E=D,G=S,L=k,P=M,W=z,ta=j,la=w;return s(),i("div",X,[n("div",Z,[o(U,null,{default:r((()=>[o(E,{class:"general-card-upai",style:{width:"100%"}},{default:r((()=>[o(U,null,{default:r((()=>[o(g,{flex:1},{default:r((()=>[o(A,{model:N.value,"auto-label-width":"","label-align":"left"},{default:r((()=>[o(U,{gutter:16},{default:r((()=>[o(g,{span:8},{default:r((()=>[o(d,{field:"status",label:"上传状态"},{default:r((()=>[o(l,{modelValue:N.value.status,"onUpdate:modelValue":e[0]||(e[0]=a=>N.value.status=a),"allow-clear":"",placeholder:"请选择上传状态"},{default:r((()=>[(s(!0),i(u,null,p(c(q)(c(J)),((a,e)=>(s(),I(t,{key:e,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(g,{span:8},{default:r((()=>[o(d,{field:"auditStatus",label:"审核状态"},{default:r((()=>[o(l,{modelValue:N.value.auditStatus,"onUpdate:modelValue":e[1]||(e[1]=a=>N.value.auditStatus=a),"allow-clear":"",placeholder:"请选择审核状态"},{default:r((()=>[(s(!0),i(u,null,p(c(q)(c(K)),((a,e)=>(s(),I(t,{key:e,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(g,{span:8},{default:r((()=>[o(d,{field:"number","hide-label":!0},{default:r((()=>[o(O,{size:18},{default:r((()=>[o(C,{type:"primary",class:"searchBtn",onClick:R},{default:r((()=>[f(" 筛选 ")])),_:1}),o(C,{type:"outline",class:"refreshBtn",onClick:e[2]||(e[2]=a=>R())},{default:r((()=>[f(" 刷新 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1}),o(E,{class:"general-card-upai",style:{width:"100%","padding-bottom":"28px"}},{default:r((()=>[o(U,null,{default:r((()=>[o(g,{flex:"1"},{default:r((()=>[o(ta,{"row-key":"id",pagination:!1,hoverable:!0,loading:c(V),stripe:!1,data:B.value,bordered:!1},{columns:r((()=>[o(G,{title:"视频编号","data-index":"taskVideoNonce",align:"center"}),o(G,{title:"发布视频",align:"left",width:"350"},{cell:r((({record:a})=>[o(O,null,{default:r((()=>[o(L,{src:a.coverUrl||"http://lf1-xgcdn-tos.pstatp.com/obj/vcloud/vadmin/start.8e0e4855ee346a46ccff8ff3e24db27b.png",width:"80px",height:"100px",style:{width:"80px",height:"100px"}},null,8,["src"]),o(O,{direction:"vertical",fill:""},{default:r((()=>[o(P,{ellipsis:{rows:1,expandable:!0}},{default:r((()=>[f(m(a.description||"-"),1)])),_:2},1024),n("div",$,[o(P,{copyable:"",style:{"margin-bottom":"0"}},{default:r((()=>[f(m(a.videoNickName||"-"),1)])),_:2},1024)]),n("div",aa,[o(P,{style:{"margin-bottom":"0"}},{default:r((()=>[f(m(a.createdAt||"-"),1)])),_:2},1024)])])),_:2},1024)])),_:2},1024)])),_:1}),o(G,{title:"上传状态","data-index":"taskStatus",align:"center"},{cell:r((({record:a})=>[o(W,{color:"arcoblue"},{default:r((()=>[f(m(c(J)[a.status]),1)])),_:2},1024)])),_:1}),o(G,{title:"审核状态","data-index":"taskStatus",align:"center"},{cell:r((({record:a})=>[o(W,{color:"arcoblue"},{default:r((()=>[f(m(c(K)[a.auditStatus]),1)])),_:2},1024)])),_:1}),o(G,{title:"错误原因","data-index":"errorMsg",align:"center"})])),_:1},8,["loading","data"]),n("div",ea,[n("div",null,[o(la,{current:T.pageIndex,"onUpdate:current":e[3]||(e[3]=a=>T.pageIndex=a),"page-size":T.pageSize,"onUpdate:pageSize":e[4]||(e[4]=a=>T.pageSize=a),total:T.total,"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:F,onPageSizeChange:Q},null,8,["current","page-size","total"])])])])),_:1})])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-fcd6babf"]]),la=a=>(B("data-v-abe67fbf"),a=a(),E(),a),da={class:"container"},sa={class:"upai_content"},ia=la((()=>n("div",{class:"pageTitle"}," 任务记录 ",-1))),na=la((()=>n("div",{class:"labelText"},"创建时间：",-1))),oa=["src"],ra={key:0},ua={class:"pagination"},pa=a(e({__name:"task-list",setup(a,{expose:e}){const d=[{label:"当日",value:()=>[g().startOf("date").format("YYYY-MM-DD HH:mm:ss"),g().endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"昨日",value:()=>[g().add(-1,"day").startOf("date").format("YYYY-MM-DD HH:mm:ss"),g().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一周",value:()=>[g().add(-1,"week").startOf("date").format("YYYY-MM-DD HH:mm:ss"),g().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"近一月",value:()=>[g().add(-1,"month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),g().add(-1,"day").endOf("date").format("YYYY-MM-DD HH:mm:ss")]},{label:"本月",value:()=>[g().startOf("month").startOf("date").format("YYYY-MM-DD HH:mm:ss"),g().endOf("date").format("YYYY-MM-DD HH:mm:ss")]}],{loading:k,setLoading:M}=G(!0),B=l(0),E={current:1,pageIndex:1,pageSize:10},P=t({...E}),J=()=>({startDate:g().add(-1,"month").format("YYYY-MM-DD").toString(),endDate:g().format("YYYY-MM-DD").toString(),pageIndex:1,pageSize:10,taskStatus:-1}),K=l(J()),X=l([]);l(0);const Z=l(!1),$=async a=>{M(!0);try{const{data:e}=await F(a);X.value=e.grid,P.current=a.pageIndex,P.pageIndex=a.pageIndex,P.total=e.total}catch(e){}finally{M(!1)}},aa=a=>{E.pageIndex=a,E.current=a,P.pageIndex=a,P.current=a,$({...K.value,...E})},ea=a=>{E.pageSize=a,P.pageSize=a,$({...K.value,...E})},la=a=>{K.value.startDate=a[0],K.value.endDate=a[1]},pa=()=>{aa(1)};L();const ca=l([]);return $({...K.value}),e({fetchData:$}),(a,e)=>{const t=C("Breadcrumb"),l=H,M=v,E=_,G=b,L=O,F=x,$=U,fa=T,ma=Y,ga=h,va=y,_a=D,ba=A,xa=S,Ya=z,ha=j,ya=w,Da=N;return s(),i("div",da,[n("div",sa,[o(t,{items:["视频管理","任务记录"]}),ia,o(ga,null,{default:r((()=>[o(_a,{class:"general-card-upai",style:{width:"100%"}},{default:r((()=>[o(ga,null,{default:r((()=>[o(G,{flex:1},{default:r((()=>[o(va,{model:K.value,"auto-label-width":"","label-align":"left"},{default:r((()=>[o(ga,{gutter:16},{default:r((()=>[o(G,{span:8},{default:r((()=>[o(E,{field:"taskStatus",label:"任务状态"},{default:r((()=>[o(M,{modelValue:K.value.taskStatus,"onUpdate:modelValue":e[0]||(e[0]=a=>K.value.taskStatus=a),"allow-clear":"",placeholder:"请选择视频号类型"},{default:r((()=>[(s(!0),i(u,null,p(c(q)(c(Q)),((a,e)=>(s(),I(l,{key:e,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(G,{span:8},{default:r((()=>[o(E,{field:"createdTime"},{label:r((()=>[na])),default:r((()=>[o(L,{modelValue:ca.value,"onUpdate:modelValue":e[1]||(e[1]=a=>ca.value=a),"show-time":"","default-value":[],style:{width:"100%"},shortcuts:d,"shortcuts-position":"left",onChange:la},null,8,["modelValue"])])),_:1})])),_:1}),o(G,{span:8},{default:r((()=>[o(E,{field:"number","hide-label":!0},{default:r((()=>[o(ma,{size:18},{default:r((()=>[o(F,{type:"primary",class:"searchBtn",onClick:pa},{default:r((()=>[f(" 筛选 ")])),_:1}),o(F,{type:"outline",class:"refreshBtn",onClick:e[2]||(e[2]=a=>pa())},{default:r((()=>[f(" 刷新 ")])),_:1}),o(fa,{type:"primary"},{default:r((()=>[o($,{href:"javascript:void(0)",onClick:e[3]||(e[3]=a=>(K.value=J(),void(ca.value=[])))},{default:r((()=>[f("重置筛选条件")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])),_:1}),o(_a,{class:"general-card-upai",style:{width:"100%","padding-bottom":"28px"}},{default:r((()=>[o(ga,null,{default:r((()=>[o(G,{flex:"1"},{default:r((()=>[o(ha,{"row-key":"id",pagination:!1,hoverable:!0,loading:c(k),stripe:!1,data:X.value,bordered:!1},{columns:r((()=>[o(xa,{title:"发布号"},{cell:r((({record:a})=>[o(ma,null,{default:r((()=>[o(ba,null,{default:r((()=>[n("img",{alt:"avatar",src:a.sphAideInfo.sphAvatar},null,8,oa)])),_:2},1024),f(" "+m(a.sphAideInfo.sphName),1)])),_:2},1024)])),_:1}),o(xa,{title:"任务状态","data-index":"taskStatus",align:"center"},{cell:r((({record:a})=>[o(Ya,{color:"arcoblue"},{default:r((()=>[f(m(c(Q)[a.taskStatus]),1)])),_:2},1024)])),_:1}),o(xa,{title:"描述类型","data-index":"videoDescriptionType",align:"center"},{cell:r((({record:a})=>[f(m(c(R)[a.videoDescriptionType]),1)])),_:1}),o(xa,{title:"发布类型","data-index":"publishType",align:"center"},{cell:r((({record:a})=>[o(ma,{direction:"vertical"},{default:r((()=>[n("span",null,m(c(W)[a.publishType]),1),2===a.publishType?(s(),i("span",ra,m(c(g).unix(a.publishTimer).format("YYYY-MM-DD HH:mm:ss")),1)):V("",!0)])),_:2},1024)])),_:1}),o(xa,{title:"挂车商品ID","data-index":"productCode",align:"center"}),o(xa,{title:"创建数量","data-index":"createNum",align:"center"}),o(xa,{title:"创建成功","data-index":"orderSuccess",align:"center"}),o(xa,{title:"创建失败","data-index":"orderError",align:"center"}),o(xa,{title:"更新时间","data-index":"updatedAt",align:"center"}),o(xa,{align:"center",fixed:"right",title:"操作","data-index":"operations"},{cell:r((({record:a})=>[o(F,{type:"text",size:"small",onClick:e=>{return t=a,B.value=t.taskAideId,void(Z.value=!0);var t}},{default:r((()=>[f(" 素材详情 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["loading","data"]),n("div",ua,[n("div",null,[o(ya,{current:P.pageIndex,"onUpdate:current":e[4]||(e[4]=a=>P.pageIndex=a),"page-size":P.pageSize,"onUpdate:pageSize":e[5]||(e[5]=a=>P.pageSize=a),total:P.total,"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:aa,onPageSizeChange:ea},null,8,["current","page-size","total"])])])])),_:1})])),_:1})])),_:1})]),o(Da,{visible:Z.value,"onUpdate:visible":e[6]||(e[6]=a=>Z.value=a),width:"1300px","body-style":{padding:0},title:"素材上传记录",style:{padding:"0"},footer:!1},{default:r((()=>[o(ta,{id:B.value},null,8,["id"])])),_:1},8,["visible"])])}}}),[["__scopeId","data-v-abe67fbf"]]);export{pa as default};
