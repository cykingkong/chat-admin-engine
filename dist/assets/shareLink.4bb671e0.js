import{u as e,k as a,v as t,n as l,o as r,_ as n}from"./index.a302575e.js";/* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              */import{d as i,f as s,r as o,aU as d,aH as u,D as c,E as p,aK as m,H as v,aJ as g,aO as b,aP as f,u as h,aF as x,aG as _,b_ as y,aM as I,aL as k,bk as z,bG as j,c2 as w,bl as M,c3 as S,c4 as C,c5 as P,bq as L,c6 as U,c7 as O,c8 as T,be as V,bz as A,b9 as B,ba as E,bu as R,bv as $}from"./arco.0e1801a1.js";import{u as q}from"./loading.4d3258a0.js";import{g as D,a as G}from"./sph.fffc74fa.js";import{f as H}from"./vue.6618b53d.js";import{m as K,b as N}from"./enum.5f967a9b.js";import{c as F}from"./copy.33b9be14.js";import"./chart.b4fe0742.js";const J=e=>(B("data-v-810e58cd"),e=e(),E(),e),W={class:"container"},Q={class:"bgWBox",style:{width:"100%"}},X=J((()=>v("h1",{style:{"font-size":"18px","margin-bottom":"10px","margin-top":"0",color:"#000"}}," 邀请记录 ",-1))),Y={class:"pagination"},Z=J((()=>v("div",null,null,-1))),ee={class:"pagination"},ae=J((()=>v("div",null,null,-1))),te=n(i({__name:"shareLink",setup(n){const i=e(),B=s(""),E=s("");a().then((e=>{E.value=e.data.shareLink,B.value=e.data.authKey}));H();const J=s(!1),te=s(!1),le=s([]),re=s(!1);s(!1),s([]),s("");const ne=s(""),ie=s(""),se=s(!1);s(),s(0),s(0);const oe=s("修改信息"),de=s({id:void 0,sphType:0,sphRemark:"",type:1}),ue=s({remark:"备注"}),{loading:ce,setLoading:pe}=q(!0);t.exports.useI18n();const me=s([]),ve=s({});s(!1),s("");const ge={current:1,pageIndex:1,pageSize:10},be=o({...ge}),fe=o({...ge}),he=async e=>{pe(!0);try{const{data:a}=await l(e);me.value=a.grid,be.current=e.pageIndex,be.pageIndex=e.pageIndex,be.total=a.total}catch(a){}finally{pe(!1)}},xe=e=>{ge.pageIndex=e,ge.current=e,be.pageIndex=e,be.current=e,he({...ve.value,...ge})},_e=e=>{ge.pageSize=e,be.pageSize=e,he({...ve.value,...ge})},ye=()=>{xe(1)};he({...ve.value,...ge});const Ie=s(!1),ke=s(null),ze=async()=>{if(Ie.value)return;Ie.value=!0;const e=await G({token:ie.value});if(Ie.value=!1,5===e.data.status&&(se.value=!0),1===e.data.status)return z.success({content:"登录成功",duration:5e3}),re.value=!1,se.value=!1,ye(),clearInterval(ke.value),void(ke.value=null);ke.value=setTimeout(ze,1e3)},je=async e=>{const{data:a}=await l(e);a.grid?(le.value=a.grid,fe.current=e.pageIndex,fe.pageIndex=e.pageIndex,fe.total=a.total):fe.total=0},we=s(0),Me=e=>{fe.pageIndex=e,fe.current=e,je({shareLevel:2,shareMemberId:we.value,...fe})},Se=e=>{fe.pageSize=e,je({shareLevel:2,shareMemberId:we.value,...fe})};d((()=>{clearInterval(ke.value),ke.value=null}));const Ce=s(),Pe=async e=>{var a;await(null==(a=Ce.value)?void 0:a.validate())?e(!1):(1===de.value.type||(await r(de.value),z.success({content:"修改成功",duration:5e3}),ye()),window.setTimeout((()=>{e()}),300))},Le=()=>{J.value=!1};return(e,a)=>{const t=u("Breadcrumb"),l=j,r=w,n=u("icon-link"),s=M,o=S,d=C,B=P,q=u("icon-edit"),G=L,H=U,se=O,pe=T,ve=V,he=R,ye=$,Ie=A;return c(),p("div",W,[m(t,{items:["邀请链接"]}),v("div",Q,[m(o,{gutter:16},{default:g((()=>[m(r,{flex:"80px"},{default:g((()=>[m(l,null,{default:g((()=>[b(" 专属链接 ")])),_:1})])),_:1}),m(r,{flex:"auto"},{default:g((()=>[m(l,{type:"primary",style:{cursor:"pointer"}},{default:g((()=>[b(f(E.value),1)])),_:1})])),_:1}),m(r,{flex:"80px"},{default:g((()=>[m(s,{type:"primary",onClick:a[0]||(a[0]=e=>(F(`【魔力智投】\n  视频号微信豆、智能投放工具，让你轻松突破ROI瓶颈~\n\n  ${E.value}\n  -------\n  点击立即领取7天免费试用`),void z.success("复制成功")))},{icon:g((()=>[m(n)])),default:g((()=>[b("复制链接 ")])),_:1})])),_:1})])),_:1})]),m(o),m(pe,{class:"general-card-upai",style:{width:"100%","padding-bottom":"32px"}},{default:g((()=>[X,m(H,{"row-key":"id",pagination:!1,loading:h(ce),data:me.value,hoverable:!0,stripe:!1,bordered:!1,onPageChange:xe},{columns:g((()=>[m(d,{title:"昵称",align:"center"},{cell:g((({record:e})=>[b(f(e.shareMemberInfo?e.shareMemberInfo.memberPhone:"-"),1)])),_:1}),m(d,{title:"手机号码",align:"center"},{cell:g((({record:e})=>[b(f(e.shareMemberInfo?e.shareMemberInfo.memberPhone:"-"),1)])),_:1}),m(d,{title:"实付金额",align:"center"},{cell:g((({record:e})=>[b(f(e.payPrice?e.payPrice:"-"),1)])),_:1}),m(d,{title:"账号类型",align:"center"},{cell:g((({record:e})=>[m(B,{color:"arcoblue"},{default:g((()=>[b(f(e.shareMemberInfo?h(K)[e.shareMemberInfo.memberLevel]:"-"),1)])),_:2},1024)])),_:1}),m(d,{title:"绑定状态",align:"center"},{cell:g((({record:e})=>[b(f(e.bindStatus?h(N)[e.bindStatus]:"-"),1)])),_:1}),2===h(i).$state.memberChannel?(c(),x(d,{key:0,title:"二级邀请",align:"center"},{cell:g((({record:e})=>[b(f(e.shareCount),1)])),_:1})):_("",!0),m(d,{title:"创建时间",align:"center"},{cell:g((({record:e})=>[b(f(e.createdAt),1)])),_:1}),m(d,{title:"使用过期时间",align:"center"},{cell:g((({record:e})=>[b(f(e.shareMemberInfo?e.shareMemberInfo.memberExpiredAt:"-"),1)])),_:1}),m(d,{title:"备注",align:"center"},{cell:g((({record:e})=>[m(G,{size:8},{default:g((()=>[b(f(e.remark||"-")+" ",1),m(l,{type:"primary",style:{cursor:"pointer"},onClick:a=>(async(e,a)=>{if(2===e)oe.value="修改备注",de.value.remark=a.remark,de.value.id=a.id,de.value.type=2,J.value=!0;else{J.value=!1;const{data:e}=await D({});ne.value=e.url,ie.value=e.token,re.value=!0,ke.value=setTimeout(ze,1e3)}})(2,e)},{default:g((()=>[m(q)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1}),2===h(i).$state.memberChannel?(c(),x(d,{key:1,align:"center",title:"操作","data-index":"operations",fixed:"right",width:250},{cell:g((({record:e})=>[m(s,{type:"text",size:"small",onClick:a=>{return t=e,le.value=[],we.value=t.shareMemberId,je({shareLevel:2,shareMemberId:we.value,...ge}),void(te.value=!0);var t}},{default:g((()=>[b(" 邀请详情 ")])),_:2},1032,["onClick"])])),_:1})):_("",!0)])),_:1},8,["loading","data"]),v("div",Y,[Z,v("div",null,[m(se,{current:be.pageIndex,"onUpdate:current":a[1]||(a[1]=e=>be.pageIndex=e),"page-size":be.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>be.pageSize=e),total:Number(be.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:xe,onPageSizeChange:_e},null,8,["current","page-size","total"])])])])),_:1}),m(ve,{visible:te.value,"onUpdate:visible":a[5]||(a[5]=e=>te.value=e),title:"二级邀请列表",width:"800px",onCancel:a[6]||(a[6]=e=>te.value=!1),onOk:a[7]||(a[7]=e=>te.value=!1)},{default:g((()=>[m(H,{"row-key":"id",pagination:!1,loading:h(ce),data:le.value,hoverable:!0,stripe:!1,bordered:!1},{columns:g((()=>[m(d,{title:"昵称",align:"center"},{cell:g((({record:e})=>[b(f(e.shareMemberInfo.memberPhone),1)])),_:1}),m(d,{title:"账号类型",align:"center"},{cell:g((({record:e})=>[m(B,{color:"arcoblue"},{default:g((()=>[b(f(h(K)[e.shareMemberInfo.memberLevel]),1)])),_:2},1024)])),_:1}),m(d,{title:"实付金额",align:"center"},{cell:g((({record:e})=>[b(f(e.payPrice?e.payPrice:"-"),1)])),_:1}),m(d,{title:"绑定状态",align:"center"},{cell:g((({record:e})=>[b(f(e.bindStatus?h(N)[e.bindStatus]:"-"),1)])),_:1}),m(d,{title:"使用状态",align:"center"},{cell:g((({record:e})=>[b(f(Date.now()<h(y)(e.shareMemberInfo.memberExpiredAt).valueOf()?"使用中":"已过期"),1)])),_:1})])),_:1},8,["loading","data"]),v("div",ee,[ae,v("div",null,[m(se,{current:fe.pageIndex,"onUpdate:current":a[3]||(a[3]=e=>fe.pageIndex=e),"page-size":fe.pageSize,"onUpdate:pageSize":a[4]||(a[4]=e=>fe.pageSize=e),total:Number(fe.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:Me,onPageSizeChange:Se},null,8,["current","page-size","total"])])])])),_:1},8,["visible"]),m(ve,{visible:J.value,"onUpdate:visible":a[8]||(a[8]=e=>J.value=e),title:oe.value,onCancel:Le,onBeforeOk:Pe},{default:g((()=>[m(Ie,{ref_key:"formRef",ref:Ce,model:de.value,"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:g((()=>[(c(!0),p(I,null,k(ue.value,((e,a)=>(c(),x(ye,{key:e,field:a,label:e,rules:[{required:!0,message:"请填写"+e}]},{default:g((()=>[m(he,{modelValue:de.value[a],"onUpdate:modelValue":e=>de.value[a]=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["field","label","rules"])))),128))])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-810e58cd"]]);export{te as default};
