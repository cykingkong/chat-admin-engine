import{u as e,v as a,_ as d}from"./index.a302575e.js";/* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css               *//* empty css               *//* empty css              *//* empty css               */import{d as l,f as s,r as n,aH as t,D as i,E as o,aK as r,H as u,aJ as _,aO as c,u as f,aG as m,aP as p,aM as v,aL as g,bk as y,c2 as b,bl as I,c3 as h,bU as x,bG as j,bq as V,c4 as w,c6 as k,c7 as z,c8 as U,c9 as D,bv as C,bu as P,ch as q,ci as S,bz as A,be as E,b9 as N,ba as $,aF as O,cd as B}from"./arco.0e1801a1.js";import{u as G}from"./loading.4d3258a0.js";import{j as H,n as J,p as L,q as F,m as K}from"./merchantApi.2fad71a7.js";import{f as M}from"./vue.6618b53d.js";import"./chart.b4fe0742.js";const R={class:"container"},T={class:"box_bcw",style:{width:"100%"}},Q=["src"],W={class:"shopInfo"},X={class:"shopName"},Y={class:"APPID"},Z={class:"info"},ee={class:"shopName"},ae={class:"APPID"},de={class:"pagination"},le=(e=>(N("data-v-71d0759c"),e=e(),$(),e))((()=>u("div",null,null,-1))),se=d(l({__name:"list",setup(d){e();const l=s(""),N={x:2e3};M();const $=s(!1);s(!1),s(!1),s([]),s(""),s(""),s(""),s(!1),s(),s(0),s(0);const se=s("修改信息"),ne=s({isDefault:0,mid:void 0,address_detail:{addressId:"",address_info:{user_name:"",postal_code:"",province_name:"",city_name:"",county_name:"",detail_info:"",tel_number:"",lat:0,lng:0,house_number:""},landline:"",remark:"",send_addr:!1,default_send:!1,recv_addr:!1,default_recv:!1,address_type:{same_city:0,pickup:0}}});s({remark:"备注"});const{loading:te,setLoading:ie}=G(!0);a.exports.useI18n();const oe=s([]),re=s([]),ue=s([]),_e=s({isDefault:-1});s(!1),s("");const ce={current:1,pageIndex:1,pageSize:10},fe=n({...ce}),me=async e=>{ie(!0);try{const{data:a}=await H(e);a.grid&&(a.grid.forEach((e=>{e.detailInfo=JSON.parse(e.detailInfo),e.addressInfo=e.detailInfo.address_info.province_name+e.detailInfo.address_info.city_name+e.detailInfo.address_info.county_name+e.detailInfo.address_info.detail_info})),oe.value=a.grid),fe.current=e.pageIndex,fe.pageIndex=e.pageIndex,fe.total=a.total}catch(a){}finally{ie(!1)}},pe=e=>{ce.pageIndex=e,ce.current=e,fe.pageIndex=e,fe.current=e,me({..._e.value,...ce})},ve=e=>{ce.pageSize=e,fe.pageSize=e,me({..._e.value,...ce})},ge=()=>{pe(1)};(async()=>{const{data:e}=await J({parentCode:0});e.grid&&(e.grid.forEach((e=>{e.label=e.name,e.value=`${e.code},${e.name}`,e.children=e.level<3})),re.value=e.grid)})();const ye=e=>{const a=e.split(",")[1];ne.value.address_detail.address_info.county_name=a},be=e=>new Promise((a=>{const d=e.value.split(",");0===e.level?ne.value.address_detail.address_info.province_name=d[1]:ne.value.address_detail.address_info.city_name=d[1],J({parentCode:d[0]}).then((e=>{const{grid:d}=e.data;d.forEach((e=>{e.label=e.name,e.value=`${e.code},${e.name}`,e.children=e.level<3})),a(d)}))}));me({..._e.value,...ce}),s(!1);const Ie=async(e,a)=>{(async()=>{const{data:e}=await K(fe);ue.value=e.grid})(),2===e?(l.value="",se.value="修改地址",ne.value.mid=a.mid,ne.value.address_detail.addressId=a.addressId,ne.value.address_detail.address_info.user_name=a.detailInfo.address_info.user_name,ne.value.address_detail.address_info.tel_number=a.detailInfo.address_info.tel_number,ne.value.address_detail.address_info.postal_code=a.detailInfo.address_info.postal_code,ne.value.address_detail.address_info.detail_info=a.detailInfo.address_info.detail_info,ne.value.address_detail.address_info.province_name=a.detailInfo.address_info.province_name,ne.value.address_detail.address_info.city_name=a.detailInfo.address_info.city_name,ne.value.address_detail.address_info.county_name=a.detailInfo.address_info.county_name,ne.value.isDefault=a.isDefault,l.value=a.detailInfo.address_info.province_name+a.detailInfo.address_info.city_name+a.detailInfo.address_info.county_name,ne.value.type=2,$.value=!0):3===e&&(se.value="新增退货地址",$.value=!0,ne.value={isDefault:0,mid:void 0,address_detail:{addressId:"",address_info:{user_name:"",postal_code:"",province_name:"",city_name:"",county_name:"",detail_info:"",tel_number:"",lat:0,lng:0,house_number:""},landline:"",remark:"",send_addr:!1,default_send:!1,recv_addr:!1,default_recv:!1,address_type:{same_city:0,pickup:0}}},ne.value.type=3)},he=s(),xe=async e=>{var a;await(null==(a=he.value)?void 0:a.validate())?e(!1):(2===ne.value.type?(await L(ne.value),y.success({content:"编辑成功",duration:5e3}),ge()):(await F(ne.value),y.success({content:"添加成功",duration:5e3}),ge()),window.setTimeout((()=>{e()}),300))},je=()=>{$.value=!1};return(e,a)=>{const d=t("Breadcrumb"),s=b,n=t("icon-plus"),y=I,G=h,H=x,J=j,L=V,F=w,K=k,M=z,ie=U,_e=B,ce=D,me=C,ge=P,Ve=t("t-cascader"),we=q,ke=S,ze=A,Ue=E;return i(),o("div",R,[r(d,{items:["小店管理","小店列表"]}),u("div",T,[r(G,{justify:"space-between"},{default:_((()=>[r(s,{flex:"120px"}),r(s,{flex:"80px"},{default:_((()=>[r(y,{type:"primary",onClick:a[0]||(a[0]=e=>Ie(3))},{icon:_((()=>[r(n)])),default:_((()=>[c(" 添加退货地址 ")])),_:1})])),_:1})])),_:1})]),r(ie,{class:"general-card-upai",style:{width:"100%","padding-bottom":"32px"}},{default:_((()=>[r(K,{"row-key":"id",pagination:!1,loading:f(te),data:oe.value,hoverable:!0,scroll:N,stripe:!1,bordered:!1,onPageChange:pe},{columns:_((()=>[r(F,{title:"小店信息",align:"center"},{cell:_((({record:e})=>[r(L,null,{default:_((()=>[r(H,null,{default:_((()=>[e.merchantInfo.headimgUrl?(i(),o("img",{key:0,alt:"avatar",src:e.merchantInfo.headimgUrl},null,8,Q)):m("",!0)])),_:2},1024),r(L,null,{default:_((()=>[u("div",W,[u("div",X,[r(J,null,{default:_((()=>[c(" 名称:"),r(J,{type:"secondary"},{default:_((()=>[c(p(e.merchantInfo.nickname),1)])),_:2},1024)])),_:2},1024)]),u("div",Y,[r(J,null,{default:_((()=>[c(" APPID:"),r(J,{type:"secondary"},{default:_((()=>[c(p(e.merchantInfo.appid),1)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:2},1024)])),_:1}),r(F,{title:"创建时间",align:"center"},{cell:_((({record:e})=>[c(p(e.createdAt),1)])),_:1}),r(F,{title:"地址信息",align:"center"},{cell:_((({record:e})=>[c(p(e.addressInfo||"-"),1)])),_:1}),r(F,{title:"联系方式",align:"center"},{cell:_((({record:e})=>[r(L,null,{default:_((()=>[u("div",Z,[u("div",ee,[r(J,null,{default:_((()=>[c(" 联系人:"),r(J,{type:"secondary"},{default:_((()=>[c(p(e.detailInfo.address_info.user_name),1)])),_:2},1024)])),_:2},1024)]),u("div",ae,[r(J,null,{default:_((()=>[c(" 手机号码:"),r(J,{type:"secondary"},{default:_((()=>[c(p(e.detailInfo.address_info.tel_number),1)])),_:2},1024)])),_:2},1024)])])])),_:2},1024)])),_:1}),r(F,{title:"是否默认",align:"center"},{cell:_((({record:e})=>[c(p(e.isDefault?"默认地址":"否"),1)])),_:1}),r(F,{align:"center",title:"操作","data-index":"operations",fixed:"right"},{cell:_((({record:e})=>[r(y,{type:"text",size:"small",onClick:a=>Ie(2,e)},{default:_((()=>[c(" 修改 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["loading","data"]),u("div",de,[le,u("div",null,[r(M,{current:fe.pageIndex,"onUpdate:current":a[1]||(a[1]=e=>fe.pageIndex=e),"page-size":fe.pageSize,"onUpdate:pageSize":a[2]||(a[2]=e=>fe.pageSize=e),total:Number(fe.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:pe,onPageSizeChange:ve},null,8,["current","page-size","total"])])])])),_:1}),r(Ue,{visible:$.value,"onUpdate:visible":a[10]||(a[10]=e=>$.value=e),title:se.value,onCancel:je,onBeforeOk:xe},{default:_((()=>[r(ze,{ref_key:"formRef",ref:he,model:ne.value},{default:_((()=>[r(me,{field:"mid",label:"店铺名称",rules:[{required:!0,message:"请选择店铺名称"}]},{default:_((()=>[r(ce,{modelValue:ne.value.mid,"onUpdate:modelValue":a[3]||(a[3]=e=>ne.value.mid=e),placeholder:"请选择店铺名称"},{default:_((()=>[(i(!0),o(v,null,g(ue.value,((e,a)=>(i(),O(_e,{key:a,label:e.nickname,value:e.mid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(me,{label:"联系人",rules:[{required:!0,message:"请填写联系人"}]},{default:_((()=>[r(ge,{modelValue:ne.value.address_detail.address_info.user_name,"onUpdate:modelValue":a[4]||(a[4]=e=>ne.value.address_detail.address_info.user_name=e),placeholder:"请填写联系人"},null,8,["modelValue"])])),_:1}),r(me,{label:"联系方式",rules:[{required:!0,message:"请填写联系方式"}]},{default:_((()=>[r(ge,{modelValue:ne.value.address_detail.address_info.tel_number,"onUpdate:modelValue":a[5]||(a[5]=e=>ne.value.address_detail.address_info.tel_number=e),placeholder:"请填写手机号码"},null,8,["modelValue"])])),_:1}),r(me,{label:"选择地址",rules:[{required:!0,message:"请选择地址"}]},{default:_((()=>[r(Ve,{modelValue:l.value,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value=e),options:re.value,clearable:"","show-all-levels":"true",style:{width:"100%"},"value-mode":"all",load:be,onChange:ye},null,8,["modelValue","options"])])),_:1}),r(me,{label:"详细地址",rules:[{required:!0,message:"请填写详细地址"}]},{default:_((()=>[r(ge,{modelValue:ne.value.address_detail.address_info.detail_info,"onUpdate:modelValue":a[7]||(a[7]=e=>ne.value.address_detail.address_info.detail_info=e),placeholder:"请填写详细地址"},null,8,["modelValue"])])),_:1}),r(me,{field:"secret",label:"邮政编码",rules:[{required:!1}]},{default:_((()=>[r(ge,{modelValue:ne.value.address_detail.address_info.postal_code,"onUpdate:modelValue":a[8]||(a[8]=e=>ne.value.address_detail.address_info.postal_code=e),placeholder:"请填写邮政编码"},null,8,["modelValue"])])),_:1}),r(me,{label:"设为默认",rules:[{required:!1}]},{default:_((()=>[r(ke,{modelValue:ne.value.isDefault,"onUpdate:modelValue":a[9]||(a[9]=e=>ne.value.isDefault=e)},{default:_((()=>[r(we,{value:1},{default:_((()=>[c("设为默认地址")])),_:1}),r(we,{value:0},{default:_((()=>[c("不设为默认地址")])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])])}}}),[["__scopeId","data-v-71d0759c"]]);export{se as default};
