import{d as he,H as Fe,g as ye,aJ as fe,r as c,w as ke,a2 as Be,j as d,o as u,a as n,e,n as s,m as t,q as p,s as r,F as J,k as K,u as Ce,l as j,t as _,M as U,p as Ee,b as xe,B as G,_ as we}from"./index.f3be9d6e.js";import{o as Ae,c as Se,g as De,a as Ie}from"./pay.e9bd714e.js";import{u as be}from"./loading.b87f2d78.js";import{_ as qe}from"./lodash.5369d405.js";import{Q as Te}from"./qrcode.vue.esm.65579910.js";const g=E=>(Ee("data-v-3642772d"),E=E(),xe(),E),Ve={class:"container"},Pe={key:0,class:"shareCodeMark"},Ne={key:0,class:"ewmKFBox"},je=g(()=>e("img",{src:"https://img.adyinqing.com/upai_shop/4z0dvgoj1689055903539",alt:"",class:"ewm"},null,-1)),Ue={class:"middleBox"},Le={class:"topBox"},Me=g(()=>e("div",{class:"title_s"}," \u9886\u53D6\u5956\u52B1 ",-1)),ze=g(()=>e("span",{style:{color:"#ff0000"}},"*",-1)),Oe=g(()=>e("div",{class:"title"},"\u6536\u94F6\u53F0 ",-1)),He={class:"upai_content_outsideBox"},$e={class:"linkTitle"},Re={key:0,class:"tag"},Qe={key:1,src:"https://img.adyinqing.com/upai_shop/drrmnpjc1688611715066",alt:"",class:"select_img"},Je={className:"custom-radio-card-title"},Ke={class:"price"},Ge=g(()=>e("span",{class:"rmb"},"\xA5",-1)),We={class:"num"},Xe={class:"rmb"},Ye={class:"salePrice"},Ze={key:0},ea={key:1,style:{height:"13.8px",width:"100%"}},aa={class:"saleText"},sa={class:"upai_content_outsideBox"},ta=g(()=>e("div",{class:"linkTitle"}," \u652F\u4ED8\u65B9\u5F0F ",-1)),oa={class:"payTypeBox"},ua=["onClick"],la=["src"],ca=["src"],ia={class:"payBox"},na={key:0,src:"https://img.adyinqing.com/upai_shop/gwg1cua61689748379160",alt:"",class:"checkIcon"},da={key:1,src:"https://img.adyinqing.com/upai_shop/a9jd4arn1689748379159",alt:"",class:"checkIcon"},ra={class:"payLeft"},_a={class:"p"},pa={class:"ewmBox"},ga={key:0,class:"nocheckedMark"},ma=g(()=>e("div",{class:"markTips"},[e("span",{class:"t"}," \u8BF7\u9605\u8BFB\u5E76\u52FE\u9009\u8F6F\u4EF6\u5E94\u7528\u534F\u8BAE ")],-1)),va=[ma],ha={class:"ewmImg"},Fa={class:"text"},ya={class:"tips"},fa={key:0,class:"payRight"},ka={class:"packageType"},Ba={class:"packagePrice"},Ca={class:"price"},Ea=g(()=>e("span",{class:"rmb"}," \xA5 ",-1)),xa={key:2,class:"mark"},wa={class:"middleBox"},Aa=g(()=>e("div",{class:"titleS"},"\u652F\u4ED8\u6210\u529F",-1)),Sa=g(()=>e("img",{src:"https://img.adyinqing.com/upai_shop/n8w0t8yo1688969578821",mode:"scaleToFill",class:"successImage"},null,-1)),Da=g(()=>e("div",{class:"successTip"},"\u8BA2\u5355\u652F\u4ED8\u6210\u529F\uFF0C\u606D\u559C\u4F60\u6210\u4E3A\u9B54\u529B\u667A\u6295\u7684\u4F1A\u5458\uFF0C\u5FEB\u53BB\u4F53\u9A8C\u5427\uFF01",-1)),Ia={class:"tipsButton"},ba=he({__name:"pos",setup(E){const{loading:W,setLoading:D}=be(!0),X=Fe(),{k}=X.query,Y=ye(),Z=fe(),x=c(!1),w=c(!1),F=c(),L=c(!1),ee=o=>{console.log(o),L.value=o},y=c(!0),m=c(0),ae=()=>{window.open("https://docs.qq.com/doc/DTmltSEFxSHpOaHRy")},se="http://sph-engine-web-dev.dk.upaicm.com:17081/#/dashboard/workplace",I=c("\u524D\u5F80\u9B54\u529B\u667A\u6295\uFF085s\uFF09"),te=async o=>{const{data:a}=await Ae(o);if(console.log(a,k),A.value=a.grid,k){i.value.packageId=a.grid[Number(k)].packageId,F.value=a.grid[Number(k)],B(i.value),console.log(i.value,Number(k));return}A.value=a.grid,i.value.packageId=a.grid[0].packageId,F.value=a.grid[0],B(i.value)},B=async o=>{D(!0);try{const{data:a}=await Se(o);console.log(a),V.value=a.payInfo.codeUrl,H.value=a.payInfo.orderId,await z(),D(!1)}catch{D(!0)}},C=c(),b=c(5),M=c(!1),oe=()=>new Promise(async(o,a)=>{const{data:$,code:h,message:S}=await Ie({code:i.value.payShareCode});h===200?o(!0):(a(S),U.error(S))}),z=async()=>{try{const{data:o}=await De({orderId:H.value});o.payStatus==="1"?C.value=setTimeout(()=>{z()},3e3):o.payStatus==="2"?(C.value="",M.value=!0,O(),clearTimeout(C.value)):o.payStatus==="3"&&B(i.value)}catch{}},ue=async()=>{console.log(y.value),i.value.payShareCode?oe().then(o=>{o&&(y.value=!1,x.value=!1,w.value=!1,localStorage.setItem("shareCode",i.value.payShareCode),B(i.value),U.info("\u652F\u4ED8\u6210\u529F\uFF0C\u5373\u53EF\u83B7\u5F97\u4F18\u60E0\uFF01"))}):U.error("\u9080\u8BF7\u7801\u4E0D\u80FD\u4E3A\u7A7A")},le=c("https://img.adyinqing.com/upai_shop/hv5lhp2e1689042489778");ke(()=>y.value,(o,a)=>{le.value=o?"https://img.adyinqing.com/upai_shop/hv5lhp2e1689042489778":"https://img.adyinqing.com/upai_shop/wlx3kh3o1689042489772"}),Y.$state.sharePayCode?y.value=!1:y.value=!0;const q=c(),T=c(!1),O=()=>{if(console.log(T.value),!T.value){if(b.value!==0)b.value--,I.value=`\u524D\u5F80\u9B54\u529B\u667A\u6295\uFF08${b.value}s\uFF09`;else{I.value="\u524D\u5F80\u9B54\u529B\u667A\u6295",T.value=!0,window.location.replace(se),console.log(q.value),clearTimeout(q.value);return}q.value=setTimeout(()=>{O()},1e3)}},V=c(""),H=c(""),A=c([]),ce=c([{label:"\u5FAE\u4FE1\u652F\u4ED8"},{label:"\u8054\u7CFB\u5BA2\u670D\u652F\u4ED8"}]),i=c((()=>({packageId:void 0,payShareCode:""}))()),ie=(o,a)=>{F.value=qe.find(A.value,["packageId",o]),C.value=null,clearTimeout(C.value),B(i.value)},ne=o=>{m.value=o};return Be(()=>{console.log(Z.$state),localStorage.getItem("shareCode")&&(i.value.payShareCode=localStorage.getItem("shareCode"),y.value=!1),te({code:i.value.payShareCode})}),(o,a)=>{const $=d("a-tag"),h=d("a-col"),S=d("t-input"),f=d("a-row"),P=d("a-typography-text"),R=d("a-button"),Q=d("a-space"),de=d("a-radio"),re=d("a-grid-item"),_e=d("a-grid"),pe=d("a-radio-group"),ge=d("a-checkbox"),me=d("a-image"),ve=d("a-spin");return u(),n("div",Ve,[x.value?(u(),n("div",Pe,[w.value?(u(),n("div",Ne,[e("img",{src:"https://img.adyinqing.com/upai_shop/tzlgshuk1689054043754",alt:"",class:"close_icon_i",onClick:a[0]||(a[0]=()=>{w.value=!1})}),je,s($,{color:"#1059F5"},{default:t(()=>[p(" \u8BF7\u4F7F\u7528\u5FAE\u4FE1\u626B\u7801\u8054\u7CFB\u5BA2\u670D\u54A8\u8BE2 ")]),_:1})])):r("",!0),e("div",Ue,[e("div",Le,[Me,e("img",{src:"https://img.adyinqing.com/upai_shop/tzlgshuk1689054043754",alt:"",class:"close_icon",onClick:a[1]||(a[1]=()=>{x.value=!1})})]),s(f,{align:"center"},{default:t(()=>[s(h,{flex:"120px"},{default:t(()=>[ze,p(" \u8BF7\u8F93\u5165\u9080\u8BF7\u7801\uFF1A ")]),_:1}),s(h,{flex:"auto"},{default:t(()=>[s(S,{modelValue:i.value.payShareCode,"onUpdate:modelValue":a[2]||(a[2]=l=>i.value.payShareCode=l),placeholder:"\u8BF7\u8F93\u5165\u9080\u8BF7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),s(f,{align:"center",style:{"margin-top":"16px"}},{default:t(()=>[s(h,{flex:"120px"}),s(h,{flex:"auto"},{default:t(()=>[s(P,{type:"primary",style:{cursor:"pointer"},onClick:a[3]||(a[3]=()=>{w.value=!0})},{default:t(()=>[p(" \u5982\u4F55\u83B7\u53D6\u9080\u8BF7\u7801")]),_:1})]),_:1})]),_:1}),s(f,{align:"center",justify:"end",style:{"margin-top":"16px"}},{default:t(()=>[s(h,{flex:"120px"},{default:t(()=>[s(Q,null,{default:t(()=>[s(R,{type:"outline",size:"small",onClick:a[4]||(a[4]=()=>{x.value=!1})},{default:t(()=>[p(" \u53D6\u6D88 ")]),_:1}),s(R,{type:"primary",size:"small",onClick:a[5]||(a[5]=l=>ue())},{default:t(()=>[p(" \u786E\u5B9A ")]),_:1})]),_:1})]),_:1})]),_:1})])])):r("",!0),Oe,e("div",He,[e("div",$e,[p(" \u4F1A\u5458\u7C7B\u578B "),r("",!0)]),s(f,{align:"center",style:{"margin-top":"24px"}},{default:t(()=>[s(pe,{modelValue:i.value.packageId,"onUpdate:modelValue":a[6]||(a[6]=l=>i.value.packageId=l),style:{width:"100%"},onChange:ie},{default:t(()=>[s(_e,{cols:4,"col-gap":24,justify:"space-between"},{default:t(()=>[(u(!0),n(J,null,K(A.value,(l,v)=>(u(),j(re,{key:v},{default:t(()=>[s(de,{value:l.packageId,style:{width:"100%"}},{radio:t(({checked:N})=>[e("div",{class:G(["upai-radio-card",{"custom-radio-card-checked":N}])},[l.tag===1?(u(),n("div",Re," \u9650\u65F6\u4F18\u60E0")):r("",!0),N?(u(),n("img",Qe)):r("",!0),e("div",Je,_(l.packageName||"-"),1),e("div",Ke,[Ge,e("div",We,_(l.payPrice),1),e("div",Xe,"/"+_(l.timeUnit||"-"),1)]),e("div",Ye,[l.payPrice!==l.originalPrice?(u(),n("span",Ze," \u539F\u4EF7:"+_(l.originalPrice)+"/"+_(l.timeUnit||"-"),1)):(u(),n("div",ea))]),e("div",aa,_(l.describe||"-"),1)],2)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),r("",!0),e("div",sa,[ta,s(f,{align:"center",style:{"margin-top":"24px"}},{default:t(()=>[e("div",oa,[(u(!0),n(J,null,K(ce.value,(l,v)=>(u(),n("div",{key:v,class:G(["btn",v===m.value?"btnTypeActive":""]),onClick:N=>ne(v)},[v===0?(u(),n("img",{key:0,src:v===m.value?"https://img.adyinqing.com/upai_shop/yy2erjw21688627618113":"https://img.adyinqing.com/upai_shop/h4pm70oc1688627679108",mode:"scaleToFill",class:"icon1"},null,8,la)):r("",!0),v===1?(u(),n("img",{key:1,src:v===m.value?"https://img.adyinqing.com/upai_shop/ohmg028o1688628165834":"https://img.adyinqing.com/upai_shop/q5u4jgan1688627618112",mode:"scaleToFill",class:"icon1"},null,8,ca)):r("",!0),p(" "+_(l.label),1)],10,ua))),128))])]),_:1}),s(f,{align:"center",style:{"margin-top":"16px"}},{default:t(()=>[e("div",ia,[s(ge,{class:"ty",value:!0,onChange:ee},{checkbox:t(({checked:l})=>[s(Q,null,{default:t(()=>[l?(u(),n("img",na)):(u(),n("img",da)),s(P,null,{default:t(()=>[p(" \u5DF2\u9605\u8BFB\u5E76\u540C\u610F "),s(P,{type:"primary",style:{cursor:"pointer"},onClick:ae},{default:t(()=>[p(" \u300A\u8F6F\u4EF6\u5E94\u7528\u534F\u8BAE\u300B")]),_:1})]),_:1})]),_:2},1024)]),_:1}),e("div",ra,[e("div",_a,[e("div",pa,[!L.value&&m.value===0?(u(),n("div",ga,va)):r("",!0),s(ve,{loading:Ce(W),tip:"\u52A0\u8F7D\u4E2D"},{default:t(()=>[e("div",ha,[V.value&&m.value===0?(u(),j(Te,{key:0,value:V.value,size:121,level:"H",style:{position:"relative"}},null,8,["value"])):r("",!0),m.value===1?(u(),j(me,{key:1,width:"121",height:"121",src:"https://img.adyinqing.com/upai_shop/q2pf7ijc1701684291556"})):r("",!0)])]),_:1},8,["loading"]),e("div",Fa,_(m.value?"\u5BA2\u670D\u4E8C\u7EF4\u7801":"\u5FAE\u4FE1\u6536\u6B3E\u7801"),1)]),e("div",ya,_(m.value?"\u8BF7\u4F7F\u7528\u5FAE\u4FE1\u626B\u7801\u6DFB\u52A0\u5BA2\u670D":"\u8BF7\u4F7F\u7528\u5FAE\u4FE1\u8FDB\u884C\u626B\u7801\u652F\u4ED8"),1)])]),F.value&&m.value===0?(u(),n("div",fa,[e("div",ka," \u4F1A\u5458\u7C7B\u578B\uFF1A"+_(F.value.packageName),1),e("div",Ba,[p(" \u652F\u4ED8\u91D1\u989D\uFF1A "),e("span",Ca,[Ea,p(_(F.value.payPrice)+"\u5143",1)])])])):r("",!0)])]),_:1})]),M.value?(u(),n("div",xa,[e("div",wa,[Aa,Sa,Da,e("div",Ia,_(I.value),1)])])):r("",!0)])}}});const La=we(ba,[["__scopeId","data-v-3642772d"]]);export{La as default};
