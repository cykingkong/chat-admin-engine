import{d as ie,g as re,r as n,f as _e,v as ce,i as fe,j as d,o as h,a as k,n as a,e as c,m as t,q as i,u as me,s as pe,t as v,F as ve,k as ge,M as j,p as Fe,b as Be,l as Ee,_ as ye}from"./index.f3be9d6e.js";import{u as Ie}from"./loading.b87f2d78.js";import{j as be,n as G,p as he,q as Ce,m as Ae}from"./merchantApi.5ee4e6ba.js";const De=B=>(Fe("data-v-71d0759c"),B=B(),Be(),B),xe={class:"container"},Ve={class:"box_bcw",style:{width:"100%"}},ke=["src"],Se={class:"shopInfo"},Ue={class:"shopName"},ze={class:"APPID"},we={class:"info"},Pe={class:"shopName"},qe={class:"APPID"},Me={class:"pagination"},Ne=De(()=>c("div",null,null,-1)),$e=ie({__name:"list",setup(B){re();const E=n(""),O=()=>({isDefault:-1}),R={x:2e3};_e();const F=n(!1);n(!1),n(!1),n([]),n(""),n(""),n(""),n(!1),n(),n(0),n(0);const C=n("\u4FEE\u6539\u4FE1\u606F"),S=()=>({isDefault:0,mid:void 0,address_detail:{addressId:"",address_info:{user_name:"",postal_code:"",province_name:"",city_name:"",county_name:"",detail_info:"",tel_number:"",lat:0,lng:0,house_number:""},landline:"",remark:"",send_addr:!1,default_send:!1,recv_addr:!1,default_recv:!1,address_type:{same_city:0,pickup:0}}}),u=n(S());n({remark:"\u5907\u6CE8"});const{loading:T,setLoading:U}=Ie(!0);ce.exports.useI18n();const z=n([]),w=n([]),P=n([]),A=n(O());n(!1),n("");const m={current:1,pageIndex:1,pageSize:10},r=fe({...m}),D=async s=>{U(!0);try{const{data:e}=await be(s);e.grid&&(e.grid.forEach(o=>{o.detailInfo=JSON.parse(o.detailInfo),o.addressInfo=o.detailInfo.address_info.province_name+o.detailInfo.address_info.city_name+o.detailInfo.address_info.county_name+o.detailInfo.address_info.detail_info}),z.value=e.grid,console.log(e.grid)),r.current=s.pageIndex,r.pageIndex=s.pageIndex,r.total=e.total}catch{}finally{U(!1)}},J=async()=>{const{data:s}=await Ae(r);P.value=s.grid},x=s=>{m.pageIndex=s,m.current=s,r.pageIndex=s,r.current=s,D({...A.value,...m})},H=s=>{m.pageSize=s,r.pageSize=s,D({...A.value,...m})},q=()=>{x(1)};(async()=>{const{data:s}=await G({parentCode:0});console.log(s),s.grid&&(s.grid.forEach(e=>{e.label=e.name,e.value=`${e.code},${e.name}`,e.children=e.level<3}),console.log(s.grid),w.value=s.grid)})();const K=s=>{const e=s.split(",")[1];u.value.address_detail.address_info.county_name=e,console.log(s,u.value)},Q=s=>(console.log(s),new Promise(e=>{const o=s.value.split(",");s.level===0?u.value.address_detail.address_info.province_name=o[1]:u.value.address_detail.address_info.city_name=o[1],G({parentCode:o[0]}).then(y=>{const{grid:I}=y.data;I.forEach(_=>{_.label=_.name,_.value=`${_.code},${_.name}`,_.children=_.level<3}),e(I)})}));D({...A.value,...m}),n(!1);const M=async(s,e)=>{J(),s===2?(E.value="",C.value="\u4FEE\u6539\u5730\u5740",u.value.mid=e.mid,u.value.address_detail.addressId=e.addressId,u.value.address_detail.address_info.user_name=e.detailInfo.address_info.user_name,u.value.address_detail.address_info.tel_number=e.detailInfo.address_info.tel_number,u.value.address_detail.address_info.postal_code=e.detailInfo.address_info.postal_code,u.value.address_detail.address_info.detail_info=e.detailInfo.address_info.detail_info,u.value.address_detail.address_info.province_name=e.detailInfo.address_info.province_name,u.value.address_detail.address_info.city_name=e.detailInfo.address_info.city_name,u.value.address_detail.address_info.county_name=e.detailInfo.address_info.county_name,u.value.isDefault=e.isDefault,E.value=e.detailInfo.address_info.province_name+e.detailInfo.address_info.city_name+e.detailInfo.address_info.county_name,u.value.type=2,F.value=!0):s===3&&(C.value="\u65B0\u589E\u9000\u8D27\u5730\u5740",F.value=!0,u.value=S(),u.value.type=3)},N=n(),W=async s=>{var o;if(await((o=N.value)==null?void 0:o.validate())){s(!1);return}u.value.type===2?(await he(u.value),j.success({content:"\u7F16\u8F91\u6210\u529F",duration:5*1e3}),q()):(await Ce(u.value),j.success({content:"\u6DFB\u52A0\u6210\u529F",duration:5*1e3}),q()),window.setTimeout(()=>{s()},300)},X=()=>{F.value=!1};return(s,e)=>{const o=d("Breadcrumb"),y=d("a-col"),I=d("icon-plus"),_=d("a-button"),Y=d("a-row"),Z=d("a-avatar"),f=d("a-typography-text"),V=d("a-space"),g=d("a-table-column"),ee=d("a-table"),ae=d("a-pagination"),le=d("a-card"),te=d("a-option"),ue=d("a-select"),p=d("a-form-item"),b=d("a-input"),se=d("t-cascader"),$=d("a-radio"),ne=d("a-radio-group"),de=d("a-form"),oe=d("a-modal");return h(),k("div",xe,[a(o,{items:["\u5C0F\u5E97\u7BA1\u7406","\u5C0F\u5E97\u5217\u8868"]}),c("div",Ve,[a(Y,{justify:"space-between"},{default:t(()=>[a(y,{flex:"120px"}),a(y,{flex:"80px"},{default:t(()=>[a(_,{type:"primary",onClick:e[0]||(e[0]=l=>M(3))},{icon:t(()=>[a(I)]),default:t(()=>[i(" \u6DFB\u52A0\u9000\u8D27\u5730\u5740 ")]),_:1})]),_:1})]),_:1})]),a(le,{class:"general-card-upai",style:{width:"100%","padding-bottom":"32px"}},{default:t(()=>[a(ee,{"row-key":"id",pagination:!1,loading:me(T),data:z.value,hoverable:!0,scroll:R,stripe:!1,bordered:!1,onPageChange:x},{columns:t(()=>[a(g,{title:"\u5C0F\u5E97\u4FE1\u606F",align:"center"},{cell:t(({record:l})=>[a(V,null,{default:t(()=>[a(Z,null,{default:t(()=>[l.merchantInfo.headimgUrl?(h(),k("img",{key:0,alt:"avatar",src:l.merchantInfo.headimgUrl},null,8,ke)):pe("",!0)]),_:2},1024),a(V,null,{default:t(()=>[c("div",Se,[c("div",Ue,[a(f,null,{default:t(()=>[i(" \u540D\u79F0:"),a(f,{type:"secondary"},{default:t(()=>[i(v(l.merchantInfo.nickname),1)]),_:2},1024)]),_:2},1024)]),c("div",ze,[a(f,null,{default:t(()=>[i(" APPID:"),a(f,{type:"secondary"},{default:t(()=>[i(v(l.merchantInfo.appid),1)]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:2},1024)]),_:1}),a(g,{title:"\u521B\u5EFA\u65F6\u95F4",align:"center"},{cell:t(({record:l})=>[i(v(l.createdAt),1)]),_:1}),a(g,{title:"\u5730\u5740\u4FE1\u606F",align:"center"},{cell:t(({record:l})=>[i(v(l.addressInfo||"-"),1)]),_:1}),a(g,{title:"\u8054\u7CFB\u65B9\u5F0F",align:"center"},{cell:t(({record:l})=>[a(V,null,{default:t(()=>[c("div",we,[c("div",Pe,[a(f,null,{default:t(()=>[i(" \u8054\u7CFB\u4EBA:"),a(f,{type:"secondary"},{default:t(()=>[i(v(l.detailInfo.address_info.user_name),1)]),_:2},1024)]),_:2},1024)]),c("div",qe,[a(f,null,{default:t(()=>[i(" \u624B\u673A\u53F7\u7801:"),a(f,{type:"secondary"},{default:t(()=>[i(v(l.detailInfo.address_info.tel_number),1)]),_:2},1024)]),_:2},1024)])])]),_:2},1024)]),_:1}),a(g,{title:"\u662F\u5426\u9ED8\u8BA4",align:"center"},{cell:t(({record:l})=>[i(v(l.isDefault?"\u9ED8\u8BA4\u5730\u5740":"\u5426"),1)]),_:1}),a(g,{align:"center",title:"\u64CD\u4F5C","data-index":"operations",fixed:"right"},{cell:t(({record:l})=>[a(_,{type:"text",size:"small",onClick:L=>M(2,l)},{default:t(()=>[i(" \u4FEE\u6539 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","data"]),c("div",Me,[Ne,c("div",null,[a(ae,{current:r.pageIndex,"onUpdate:current":e[1]||(e[1]=l=>r.pageIndex=l),"page-size":r.pageSize,"onUpdate:pageSize":e[2]||(e[2]=l=>r.pageSize=l),total:Number(r.total),"show-total":!0,"show-page-size":!0,"page-size-options":[10,20,50,100,200],onChange:x,onPageSizeChange:H},null,8,["current","page-size","total"])])])]),_:1}),a(oe,{visible:F.value,"onUpdate:visible":e[10]||(e[10]=l=>F.value=l),title:C.value,onCancel:X,onBeforeOk:W},{default:t(()=>[a(de,{ref_key:"formRef",ref:N,model:u.value},{default:t(()=>[a(p,{field:"mid",label:"\u5E97\u94FA\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E97\u94FA\u540D\u79F0"}]},{default:t(()=>[a(ue,{modelValue:u.value.mid,"onUpdate:modelValue":e[3]||(e[3]=l=>u.value.mid=l),placeholder:"\u8BF7\u9009\u62E9\u5E97\u94FA\u540D\u79F0"},{default:t(()=>[(h(!0),k(ve,null,ge(P.value,(l,L)=>(h(),Ee(te,{key:L,label:l.nickname,value:l.mid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u8054\u7CFB\u4EBA",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA"}]},{default:t(()=>[a(b,{modelValue:u.value.address_detail.address_info.user_name,"onUpdate:modelValue":e[4]||(e[4]=l=>u.value.address_detail.address_info.user_name=l),placeholder:"\u8BF7\u586B\u5199\u8054\u7CFB\u4EBA"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u8054\u7CFB\u65B9\u5F0F",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8054\u7CFB\u65B9\u5F0F"}]},{default:t(()=>[a(b,{modelValue:u.value.address_detail.address_info.tel_number,"onUpdate:modelValue":e[5]||(e[5]=l=>u.value.address_detail.address_info.tel_number=l),placeholder:"\u8BF7\u586B\u5199\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u9009\u62E9\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5730\u5740"}]},{default:t(()=>[a(se,{modelValue:E.value,"onUpdate:modelValue":e[6]||(e[6]=l=>E.value=l),options:w.value,clearable:"","show-all-levels":"true",style:{width:"100%"},"value-mode":"all",load:Q,onChange:K},null,8,["modelValue","options"])]),_:1}),a(p,{label:"\u8BE6\u7EC6\u5730\u5740",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8BE6\u7EC6\u5730\u5740"}]},{default:t(()=>[a(b,{modelValue:u.value.address_detail.address_info.detail_info,"onUpdate:modelValue":e[7]||(e[7]=l=>u.value.address_detail.address_info.detail_info=l),placeholder:"\u8BF7\u586B\u5199\u8BE6\u7EC6\u5730\u5740"},null,8,["modelValue"])]),_:1}),a(p,{field:"secret",label:"\u90AE\u653F\u7F16\u7801",rules:[{required:!1}]},{default:t(()=>[a(b,{modelValue:u.value.address_detail.address_info.postal_code,"onUpdate:modelValue":e[8]||(e[8]=l=>u.value.address_detail.address_info.postal_code=l),placeholder:"\u8BF7\u586B\u5199\u90AE\u653F\u7F16\u7801"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u8BBE\u4E3A\u9ED8\u8BA4",rules:[{required:!1}]},{default:t(()=>[a(ne,{modelValue:u.value.isDefault,"onUpdate:modelValue":e[9]||(e[9]=l=>u.value.isDefault=l)},{default:t(()=>[a($,{value:1},{default:t(()=>[i("\u8BBE\u4E3A\u9ED8\u8BA4\u5730\u5740")]),_:1}),a($,{value:0},{default:t(()=>[i("\u4E0D\u8BBE\u4E3A\u9ED8\u8BA4\u5730\u5740")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])])}}});const Re=ye($e,[["__scopeId","data-v-71d0759c"]]);export{Re as default};
